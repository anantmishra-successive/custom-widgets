/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
v4.33.19 */
import{b as ie}from"./ZCZXUNWE.js";import g from"./3PFOQ4XP.js";import f from"./3RODMSQG.js";import{a as c,b as h}from"./EHA2DPVG.js";import{a as Q}from"./NEMZXIB4.js";import e from"./NCOEWMF7.js";import b from"./5NI5R3AO.js";import{a as H}from"./QDODWAYJ.js";import"./ITSRCSFZ.js";import a from"./PDDPZQ7S.js";import{A as o,B as X,E as N,c as B,d,n as v,z as R}from"./MDSKC43G.js";import{m as U,q as Z,r as Y}from"./P76SCC25.js";import{j as C}from"./TJWJSZZ6.js";import{a as O}from"./IYCX42AE.js";import"./YG7SBKS5.js";export default $arcgis.t(([,,,,,,,{Ob:g,S:q,T:k,U:D,c:V,h:u,qa:z,w:S},{h:x,i:f,n:I,o:W,p:J,r:K},{a:ee,c:te},{c:j,d:p},{b:T}])=>{var s={row:"row",column:"column",colorPicker:"color-picker"},se=B`.hide{display:none}.am5-modal{width:100%;height:100%;position:absolute;z-index:100000;top:0;left:0}.am5-modal-curtain{top:0;left:0;width:100%;height:100%;position:absolute;background:#fff!important;z-index:100}.am5-modal-wrapper{top:0;left:0;width:100%;height:100%;position:absolute;display:flex;align-items:center;justify-content:center;white-space:nowrap;background:#ffffff80;z-index:101}.am5-modal-content{display:inline-block;padding:1.2em;vertical-align:middle;text-align:start;white-space:normal;background:#fff;border-radius:4px;box-shadow:#00000073 0 0 36px;color:#000}.am5-layer-1000{z-index:1000!important}.arcgis-charts-modal{box-shadow:none!important}.arcgis-charts-modal-header{background-color:#0000000d;font-weight:700;padding:4px;align-content:center}.show{display:block}.notifyPanel{flex:0 1 auto}.disable-interactions{pointer-events:none}.dim-text{color:var(--arcgis-charts-dim-text)}:host{display:flex;flex-direction:column}.row{display:flex;flex-direction:row;column-gap:var(--arcgis-charts-inter-section-margin)}.column{display:flex;flex-direction:column;flex-wrap:wrap;flex-grow:1}.column>calcite-input{margin-bottom:.5rem;flex-grow:2}.column>calcite-input[type=number]{margin-bottom:.5rem}input{padding:.5rem}.label{display:flex;flex-direction:row;justify-content:space-between;margin-bottom:var(--arcgis-charts-intra-section-margin);flex-grow:1}.color-picker{border:1px solid var(--calcite-color-border-2);box-shadow:none;margin-bottom:var(--arcgis-charts-inter-section-margin)}.delete-guide{display:flex;flex-direction:row-reverse;height:2rem;margin:0 1rem;font-weight:550}:host([dir=rtl]) .delete-guide{flex-direction:row}`,E=class extends R{constructor(){super(...arguments),this._messages=H(),this.startCalciteInput=c(),this.endCalciteInput=c(),this.startDateCalciteInput=c(),this.endDateCalciteInput=c(),this.startTimeCalciteInput=c(),this.endTimeCalciteInput=c(),this.colorElement=c(),this.colorChange=e=>{let t=e.detail,i=this.model.getGuideStart(this.index,this.orientation),n=this.model.getGuideEnd(this.index,this.orientation);if(g(i,n)===u.SLS){let l=S(T.style),a=this.model.getGuideStyle(this.index,this.orientation),r={...l,...p(a)?a:{},color:t};this.lineStyleChange({detail:r})}else this.setColor(t)},this.symbolChange=e=>{let t=e?.detail,i=this.model.getGuideStart(this.index,this.orientation),n=this.model.getGuideEnd(this.index,this.orientation);if(g(i,n)===u.SLS){let l=S(T.style),a=this.model.getGuideStyle(this.index,this.orientation),r={...l,...p(a)?a:{},...p(t)?t:{}};this.lineStyleChange({detail:r})}else t?.color!==void 0&&this.setColor(t.color)},this.onModelConfigChange=()=>{this.requestUpdate()},this.latestGuidePosition=0,this.arcgisChartsConfigGuideChange=v(),this.arcgisChartsConfigGuidePopoverChange=v(),this.arcgisChartsConfigPopoverOpenChange=v()}static{this.properties={guidePopover:16,messageOverrides:0,model:0,timeZone:3,calculatedMinMaxBounds:2,index:11,orientation:3,latestGuidePosition:9}}static{this.styles=se}get isXAxisDateField(){return this.orientation===C.X&&U(this.model)&&this.model.getXAxisValueFormat()?.type===O.DateAxisFormat}load(){this.modelChange(this.model)}willUpdate(e){e.has("model")&&this.modelChange(this.model,e.get("model"))}loaded(){this.isXAxisDateField&&this.setGuideDateTimeRange()}disconnectedCallback(){super.disconnectedCallback(),this.model.removeEventListener("arcgisChartsModelConfigChange",this.onModelConfigChange)}modelChange(e,t){t?.removeEventListener("arcgisChartsModelConfigChange",this.onModelConfigChange),e?.addEventListener("arcgisChartsModelConfigChange",this.onModelConfigChange)}onColorElementSelect(){this.guidePopover?.open===!0?this.removeGuidePopover():this.setupGuidePopover()}setGuideStart(e){let{value:t}=e.target;this.startCalciteInput.value!==void 0&&(t===""?x({inputElement:this.startCalciteInput.value,status:f.INVALID}):(this.model.setGuideStart(t,this.index,this.orientation),this.symbolChange(),this.arcgisChartsConfigGuideChange.emit({index:this.index,orientation:this.orientation,isDelete:!1}),x({inputElement:this.startCalciteInput.value,status:f.IDLE}))),this.guidePopover?.open===!0&&this.removeGuidePopover()}setGuideEnd(e){let{value:t}=e.target;this.endCalciteInput.value!==void 0&&(this.model.setGuideEnd(t===""?null:t,this.index,this.orientation),this.symbolChange(),this.arcgisChartsConfigGuideChange.emit({index:this.index,orientation:this.orientation,isDelete:!1}),x({inputElement:this.endCalciteInput.value,status:f.IDLE})),this.guidePopover?.open===!0&&this.removeGuidePopover()}setGuideDateTimeRange(){let e=this.calculatedMinMaxBounds?.find(m=>m.isXAxis)?.minimum,t=this.calculatedMinMaxBounds?.find(m=>m.isXAxis)?.maximum,i=typeof e=="number"?new Date(e):new Date,n=typeof t=="number"?new Date(t):new Date,l=new window.Intl.DateTimeFormat().resolvedOptions().timeZone,a=q(this.timeZone)??l,r=k(i,a),b=D(i,a),G=k(n,a),oe=D(n,a),L=this.startDateCalciteInput.value?.value??"",$=L===""?r:L,A=this.startTimeCalciteInput.value?.value??"",M=A===""?b:A,y=this.endDateCalciteInput.value?.value??"",P=y===""?G:y,_=this.endTimeCalciteInput.value?.value??"",F=_===""?oe:_,w=!1;if(!Array.isArray($)&&$!==void 0&&M!==void 0){let m=`${$}T${M}`;this.model.setGuideStart(m,this.index,this.orientation),w=!0}if(!Array.isArray(P)&&P!==void 0&&F!==void 0){let m=y===""?void 0:`${P}T${F}`;this.model.setGuideEnd(m,this.index,this.orientation),w=!0}w&&(this.symbolChange(),this.arcgisChartsConfigGuideChange.emit({index:this.index,orientation:this.orientation,isDelete:!1}),this.guidePopover?.open===!0&&this.removeGuidePopover())}setGuideName(e){let t=e.target.value;this.model.setGuideName(t,this.index,this.orientation),this.arcgisChartsConfigGuideChange.emit({index:this.index,orientation:this.orientation,isDelete:!1})}setGuideLabel(e){let t=e.target.value;this.model.setGuideLabelText(t,this.index,this.orientation),this.arcgisChartsConfigGuideChange.emit({index:this.index,orientation:this.orientation,isDelete:!1})}setGuideRendered(e){let t=e.target?.selectedItem?.value;if(t!==void 0){let i=t===this._messages.inFront;this.model.setGuideAbove(i,this.index,this.orientation),this.arcgisChartsConfigGuideChange.emit({index:this.index,orientation:this.orientation,isDelete:!1})}}lineStyleChange(e){let t=e.detail;this.model.setGuideStyle(t,this.index,this.orientation),this.arcgisChartsConfigGuideChange.emit({index:this.index,orientation:this.orientation,isDelete:!1})}guidePopoverChange(e){this.arcgisChartsConfigGuidePopoverChange.emit({open:e,element:this.guidePopover}),this.arcgisChartsConfigPopoverOpenChange.emit({open:e})}setupGuidePopover(){if(this.guidePopover===void 0){let n={colorChange:this.colorChange,symbolChange:this.symbolChange,popoverDismiss:l=>{this.arcgisChartsConfigPopoverOpenChange.emit(l.detail)},popoverClose:()=>{this.guidePopoverChange(!1),this.removeGuidePopover()}};this.guidePopover=te(ee.GuidePopover,n)}let e=this.model.getGuideStyle(this.index,this.orientation),t=this.model.getGuideStart(this.index,this.orientation),i=this.model.getGuideEnd(this.index,this.orientation);g(t,i)===u.SLS?this.guidePopover.selectedElement=p(e)?e:void 0:this.guidePopover.selectedElement=e?.color,this.guidePopover.referenceElement=this.colorElement.value,Array.isArray(e?.color)?(this.guidePopover.open=!0,this.addGuidePopover()):(this.guidePopover.open=!1,this.removeGuidePopover())}removeGuidePopover(){this.guidePopover?.remove(),this.guidePopoverChange(!1),this.guidePopover=void 0}addGuidePopover(){this.guidePopover!==void 0&&!document.body.contains(this.guidePopover)&&document.body.appendChild(this.guidePopover),this.guidePopoverChange(!0)}setColor(e){let t=z({opacity:0}),i=this.model.getGuideStyle(this.index,this.orientation),n={...j(i)?i:{},type:u.SFS,color:e,outline:t};this.model.setGuideStyle(n,this.index,this.orientation),this.arcgisChartsConfigGuideChange.emit({index:this.index,orientation:this.orientation,isDelete:!1})}getDateStringFromBound(e){return typeof e=="string"?e.split("T")[0]:""}getTimeStringFromBound(e){return typeof e=="string"?e.split("T")[1]:""}createTooltip(e){let t=e.target;switch(this.tooltip=W(t),t.icon){case"view-visible":this.tooltip.innerHTML=this._messages.hideGuide??"";break;case"view-hide":this.tooltip.innerHTML=this._messages.showGuide??"";break;case"trash":default:this.tooltip.innerHTML=this._messages.deleteGuide??"";break}document.body.appendChild(this.tooltip)}toggleGuide(){let e=this.model.getGuideVisibility(this.index,this.orientation);this.model.setGuideVisibility(!e,this.index,this.orientation)}destroyTooltip(){J(this.tooltip)}deleteGuide(){this.destroyTooltip(),this.orientation===C.X&&Z(this.model)?this.model.deleteXAxisGuide(this.index):this.orientation===C.Y&&Y(this.model)&&this.model.deleteYAxisGuide(this.index),this.arcgisChartsConfigGuideChange.emit({index:this.index,orientation:this.orientation,isDelete:!0})}renderColorElement(){let e=this.model.getGuideStyle(this.index,this.orientation),[t,i,n,l]=[...e?.color??[1,1,1,255]],a=this.model.getGuideStart(this.index,this.orientation),r=this.model.getGuideEnd(this.index,this.orientation),b=p(e)?K(e.style):V.Solid,G=g(a,r)===u.SLS?`line-${b}`:"square-f";return d`<calcite-list label selection-mode=single selection-appearance=border><calcite-list-item .value=${this._messages.style} class=${o(s.colorPicker)} .label=${this._messages.style} .selected=${this.guidePopover?.open} @click=${this.onColorElementSelect} ${h(this.colorElement)}><calcite-icon slot=content-end .icon=${G} style=${X({color:`rgba(${t},${i},${n},${l/255})`})}></calcite-icon></calcite-list-item></calcite-list>`}render(){let e=this.model.getGuideStart(this.index,this.orientation),t=this.model.getGuideEnd(this.index,this.orientation),i=this.model.getGuideName(this.index,this.orientation),n=this.model.getGuideLabelText(this.index,this.orientation),l=this.model.getGuideAbove(this.index,this.orientation),a=this.model.getGuideVisibility(this.index,this.orientation),r=this.isXAxisDateField;return d`<calcite-block .heading=${i??""} .open=${this.latestGuidePosition===ie(this.index,this.orientation,this.model)} collapsible .messageOverrides=${{expand:this._messages.expand,collapse:this._messages.collapse}}><calcite-action slot=control text .icon=${a?"view-visible":"view-hide"} @click=${this.toggleGuide} @mouseover=${this.createTooltip} @mouseout=${this.destroyTooltip}></calcite-action><calcite-action slot=control text icon=trash @click=${this.deleteGuide} @mouseover=${this.createTooltip} @mouseout=${this.destroyTooltip}></calcite-action><div class=${o(s.row)}><calcite-label class=${o(s.column)}>${this._messages.start}${r?d`<calcite-input-date-picker .value=${this.getDateStringFromBound(e)} required scale=s placement=bottom-end @calciteInputDatePickerChange=${this.setGuideDateTimeRange} ${h(this.startDateCalciteInput)}></calcite-input-date-picker>`:d`<calcite-input type=number required @calciteInputInput=${this.setGuideStart} @keydown=${I} number-button-type=none .value=${e?.toString()} ${h(this.startCalciteInput)}></calcite-input>`}</calcite-label><calcite-label class=${o(s.column)}>${this._messages.end}${r?d`<calcite-input-date-picker .value=${this.getDateStringFromBound(t)} scale=s placement=bottom-end @calciteInputDatePickerChange=${this.setGuideDateTimeRange} ${h(this.endDateCalciteInput)}></calcite-input-date-picker>`:d`<calcite-input type=number @calciteInputInput=${this.setGuideEnd} @keydown=${I} number-button-type=none .value=${t?.toString()} ${h(this.endCalciteInput)}></calcite-input>`}</calcite-label></div>${r?Q("time-picker-row",d`<div class=${o(s.row)}>${e!=null?d`<calcite-label class=${o(s.column)}><calcite-input-time-picker .value=${this.getTimeStringFromBound(e)} scale=s @calciteInputTimePickerChange=${this.setGuideDateTimeRange} ${h(this.startTimeCalciteInput)}></calcite-input-time-picker></calcite-label>`:null}${t!=null?d`<calcite-label class=${o(s.column)}><calcite-input-time-picker .value=${this.getTimeStringFromBound(t)} scale=s @calciteInputTimePickerChange=${this.setGuideDateTimeRange} ${h(this.endTimeCalciteInput)}></calcite-input-time-picker></calcite-label>`:null}</div>`):null}<div class=${o(s.row)}><div class=${o(s.column)}>${this.renderColorElement()}</div></div><div class=${o(s.row)}><calcite-label class=${o(s.column)}>${this._messages.guideName}<calcite-input type=text .value=${i} @calciteInputInput=${this.setGuideName}></calcite-input></calcite-label></div><div class=${o(s.row)}><calcite-label class=${o(s.column)}>${this._messages.guideLabel}<calcite-input type=text .value=${n} @calciteInputInput=${this.setGuideLabel}></calcite-input></calcite-label></div><div class=${o(s.row)}><calcite-label class=${o(s.column)}>${this._messages.display}<calcite-segmented-control @calciteSegmentedControlChange=${this.setGuideRendered} scale=s><calcite-segmented-control-item .checked=${l} .value=${this._messages.inFront}>${this._messages.inFront}</calcite-segmented-control-item><calcite-segmented-control-item .checked=${!l} .value=${this._messages.inBack}>${this._messages.inBack}</calcite-segmented-control-item></calcite-segmented-control></calcite-label></div></calcite-block>`}};N("arcgis-charts-config-guide",E);return E},"geometry/support/jsonUtils","rest/support/AttributeBinsQuery","rest/support/Query","rest/support/StatisticDefinition","time/TimeExtent","core/promiseUtils","request",a,b,e,f,g)