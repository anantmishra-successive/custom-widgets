{"version":3,"file":"requestConfig.js","sourceRoot":"","sources":["../../src/requestConfig.ts"],"names":[],"mappings":";AAAA,0BAA0B;AAC1B,+EAA+E;AAC/E,4EAA4E;AAC5E,oEAAoE;;;AAYpE;;;GAGG;AACH,MAAM,6BAA6B,GAAmB;IACpD,aAAa,EAAE,EAAE;IACjB,wBAAwB,EAAE,EAAE;IAC5B,qBAAqB,EAAE,EAAE;CAC1B,CAAC;AAEF,MAAM,oBAAoB,GAAG,wBAAwB,CAAC;AAEtD,4EAA4E;AAC5E,+EAA+E;AAC/E,yBAAyB;AACzB,IAAI,CAAE,UAAkB,CAAC,oBAAoB,CAAC,EAAE;IAC7C,UAAkB,CAAC,oBAAoB,CAAC,GAAG,kBACvC,6BAA6B,CACf,CAAC;CACrB;AAED,2EAA2E;AAC9D,QAAA,aAAa,GAAI,UAAkB,CAC9C,oBAAoB,CACH,CAAC","sourcesContent":["/* istanbul ignore file */\n// Note: currently this is all internal to the package, and we are not exposing\n// anything that a user can set... but we need all this to be able to ensure\n// that multiple instances of the package can share the same config.\n\nexport interface IRequestConfig {\n  noCorsDomains: string[];\n  crossOriginNoCorsDomains: Record<string, number>;\n  pendingNoCorsRequests: PendingRequestCache;\n}\n\nexport type PendingRequestCache = {\n  [key: string]: Promise<void>;\n};\n\n/**\n * The default config for the request module. This is used to store\n * the no-cors domains and pending requests.\n */\nconst DEFAULT_ARCGIS_REQUEST_CONFIG: IRequestConfig = {\n  noCorsDomains: [],\n  crossOriginNoCorsDomains: {},\n  pendingNoCorsRequests: {}\n};\n\nconst GLOBAL_VARIABLE_NAME = \"ARCGIS_REST_JS_NO_CORS\";\n\n// Set the global variable to the default config if it is not aleady defined\n// This is done to ensure that all instances of rest-request work with a single\n// instance of the config\nif (!(globalThis as any)[GLOBAL_VARIABLE_NAME]) {\n  (globalThis as any)[GLOBAL_VARIABLE_NAME] = {\n    ...DEFAULT_ARCGIS_REQUEST_CONFIG\n  } as IRequestConfig;\n}\n\n// export the settings as immutable consts that read from the global config\nexport const requestConfig = (globalThis as any)[\n  GLOBAL_VARIABLE_NAME\n] as IRequestConfig;\n"]}