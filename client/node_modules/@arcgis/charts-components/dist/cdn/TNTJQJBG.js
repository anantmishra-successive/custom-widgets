/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
v4.33.19 */
import{a as B}from"./OPIJEUTW.js";import{a as w,b as C}from"./QJYWZ24Z.js";import{a as h,b as r}from"./EHA2DPVG.js";import b from"./5NI5R3AO.js";import{a as m}from"./QDODWAYJ.js";import"./ITSRCSFZ.js";import a from"./PDDPZQ7S.js";import{A as o,E as v,c as f,d as s,z as N}from"./MDSKC43G.js";import"./TJWJSZZ6.js";import{a as l}from"./IYCX42AE.js";import"./YG7SBKS5.js";export default $arcgis.t(([{x:c},{a:g,f:M,g:x,h:p,i:i}])=>{var d={linkContainer:"link-container",label:"label",mb2:"mb-2"},L=f`.hide{display:none}.am5-modal{width:100%;height:100%;position:absolute;z-index:100000;top:0;left:0}.am5-modal-curtain{top:0;left:0;width:100%;height:100%;position:absolute;background:#fff!important;z-index:100}.am5-modal-wrapper{top:0;left:0;width:100%;height:100%;position:absolute;display:flex;align-items:center;justify-content:center;white-space:nowrap;background:#ffffff80;z-index:101}.am5-modal-content{display:inline-block;padding:1.2em;vertical-align:middle;text-align:start;white-space:normal;background:#fff;border-radius:4px;box-shadow:#00000073 0 0 36px;color:#000}.am5-layer-1000{z-index:1000!important}.arcgis-charts-modal{box-shadow:none!important}.arcgis-charts-modal-header{background-color:#0000000d;font-weight:700;padding:4px;align-content:center}.show{display:block}.notifyPanel{flex:0 1 auto}.disable-interactions{pointer-events:none}.dim-text{color:var(--arcgis-charts-dim-text)}calcite-block{width:var(--arcgis-charts-config-calcite-block-width, var(--arcgis-charts-config-calcite-block-default-width));height:var(--arcgis-charts-config-calcite-block-height, var(--arcgis-charts-config-calcite-block-default-height));border:0px;-webkit-box-shadow:0 0 0 0;box-shadow:0 0}.text{display:flex;margin-left:var(--arcgis-charts-config-margin-minor);width:calc(100% - 1.5rem);height:2rem;margin-bottom:var(--arcgis-charts-config-margin-minor)}.label{display:flex;justify-content:space-between}.mb-2{margin-bottom:var(--arcgis-charts-config-margin-minor)}.link-container{display:flex;justify-content:flex-end;margin-top:-.75rem}`,b=class extends N{constructor(){super(...arguments),this._messages=m(),this.commonStrings=m({name:"common",blocking:!0}),this.axisModel=new B,this.minBoundInputElement=h(),this.maxBoundInputElement=h(),this.showLogScaleSwitch=h(),this.defaultMinBound=Number.NaN,this.defaultMaxBound=Number.NaN,this.onMaxBoundsChange=async()=>{let t=this.maxBoundInputElement.value?.value,e=this.maxBoundInputElement.value?.status;if(t!==void 0&&t!==""){let n=this.maxBoundInputElement.value?.min===void 0?this.axisModel.getMinBound():Math.max(this.maxBoundInputElement.value.min,this.axisModel.getMinBound()),a=Number.parseFloat(t);if(a!==this.axisModel.getMinBound()&&M(a,n,this.maxBoundInputElement.value?.max)){if(a!==this.axisModel.getMaxBound()){await this.axisModel.setMaxBound(a);let u=this.getAxisBoundsFromStateStore();u&&(u.currMaxBound=a)}e=i.IDLE}else e=i.INVALID}else e=i.IDLE;this.maxBoundInputElement.value&&p({inputElement:this.maxBoundInputElement.value,status:e}),e!==i.INVALID&&this.minBoundInputElement.value?.status===i.INVALID&&await this.onMinBoundsChange(),this.requestUpdate()},this.onMaxBoundsChangeDebounced=c(this.onMaxBoundsChange,g.DebounceTimer),this.onMinBoundsChange=async()=>{let t=this.minBoundInputElement.value?.value,e=this.minBoundInputElement.value?.status;if(t!==void 0&&t!==""){let n=this.minBoundInputElement.value?.max===void 0?this.axisModel.getMaxBound():Math.min(this.minBoundInputElement.value.max,this.axisModel.getMaxBound()),a=Number.parseFloat(t);if(a!==this.axisModel.getMaxBound()&&M(a,this.minBoundInputElement.value?.min,n)){if(a!==this.axisModel.getMinBound()){await this.axisModel.setMinBound(a);let u=this.getAxisBoundsFromStateStore();u&&(u.currMinBound=a)}e=i.IDLE}else e=i.INVALID}else e=i.IDLE;this.minBoundInputElement.value&&p({inputElement:this.minBoundInputElement.value,status:e}),e!==i.INVALID&&this.maxBoundInputElement.value?.status===i.INVALID&&await this.onMaxBoundsChange(),await this.updateEnableLogarithmic(this.axisModel.getLogarithmic()&&(this.dataMinValue??Number.NaN)>0),this.requestUpdate()},this.onMinBoundsChangeDebounced=c(this.onMinBoundsChange,g.DebounceTimer),this.onModelConfigChange=()=>{this.requestUpdate()},this.disableMaxBoundResetBtn=!0,this.disableMinBoundResetBtn=!0,this.isXAxis=!1,this.axisTitle=""}static{this.properties={disableMaxBoundResetBtn:16,disableMinBoundResetBtn:16,messageOverrides:0,model:0,isXAxis:5,axisTitle:1,maxBoundMaxLimit:9,maxBoundMinLimit:9,minBoundMinLimit:9,minBoundMaxLimit:9,showMaxBoundOption:5,showMinBoundOption:5,showEnableLogOption:5,dataMaxValue:9,dataMinValue:9,initialMaxBound:9,initialMinBound:9}}static{this.styles=L}load(){this.modelChange(this.model),this.dataMinValue!==void 0&&this.dataMinValueChange(this.dataMinValue,Number.NaN),this.dataMaxValue!==void 0&&this.dataMaxValueChange(this.dataMaxValue,Number.NaN)}willUpdate(t){t.has("model")&&this.modelChange(this.model,t.get("model")),t.has("dataMinValue")&&this.dataMinValueChange(this.dataMinValue??Number.NaN,t.get("dataMinValue")),t.has("dataMaxValue")&&this.dataMaxValueChange(this.dataMaxValue??Number.NaN,t.get("dataMaxValue")),t.has("initialMaxBound")&&this.initialMaxBoundChange(),t.has("initialMinBound")&&this.initialMinBoundChange()}updated(){this.disableResetButtons()}disconnectedCallback(){super.disconnectedCallback(),this.model.removeEventListener("arcgisChartsModelConfigChange",this.onModelConfigChange)}modelChange(t,e){this.axisModel=new B(this.model,this.isXAxis),e?.removeEventListener("arcgisChartsModelConfigChange",this.onModelConfigChange),t?.addEventListener("arcgisChartsModelConfigChange",this.onModelConfigChange)}dataMinValueChange(t,e){Number.isNaN(e)&&!Number.isNaN(t)&&(this.defaultMinBound=t)}dataMaxValueChange(t,e){Number.isNaN(e)&&!Number.isNaN(t)&&(this.defaultMaxBound=t)}initialMaxBoundChange(){Number.isNaN(this.axisModel.getMaxBound())||this.axisModel.setMaxBound(this.axisModel.getMaxBound())}initialMinBoundChange(){Number.isNaN(this.axisModel.getMinBound())||this.axisModel.setMinBound(this.axisModel.getMinBound())}getAxisBoundsFromStateStore(){let t,e=w.chartAxesBoundDataMap,n=this.model.getChartId();if(n){let a=C({chartId:n,isXAxis:this.isXAxis,isLogarithmic:this.axisModel.getLogarithmic()});t=e[n]?.[a]}return t}disableResetButtons(){let t=this.getAxisBoundsFromStateStore();t&&(this.disableMaxBoundResetBtn=t.defaultMaxBound===t.currMaxBound,this.disableMinBoundResetBtn=t.defaultMinBound===t.currMinBound)}async onShowLogScaleMouseEnter(){this.showLogScaleTooltip?.remove(),this.showLogScaleSwitch.value?.disabled&&(this.showLogScaleTooltip=document.createElement("calcite-tooltip"),this.showLogScaleTooltip.textContent=this.commonStrings.tooltips?.logDisabled??"",this.showLogScaleTooltip.open=!0,this.showLogScaleTooltip.referenceElement=this.showLogScaleSwitch.value,document.body.appendChild(this.showLogScaleTooltip))}onShowLogScaleMouseLeave(){this.showLogScaleTooltip?.remove()}async onCategoryFormatChange(t){await this.axisModel.setValueFormat(t.target.categoryFormat)}async updateEnableLogarithmic(t){t!==this.axisModel.getLogarithmic()&&(await this.axisModel.setLogarithmic(t),this.requestUpdate())}async onNumberFormatChange(t){await this.axisModel.setValueFormat({type:l.NumberAxisFormat,intlOptions:t.detail}),this.requestUpdate()}async onRevertMaxBoundsToDefault(){if(this.maxBoundInputElement.value?.status===i.INVALID||this.axisModel.getMaxBound()!==this.defaultMaxBound){let t=this.getAxisBoundsFromStateStore();this.axisModel.getMinBound()>this.defaultMaxBound&&await this.axisModel.setMinBound(t?.defaultMinBound??Number.NaN),await this.axisModel.setMaxBound(t?.defaultMaxBound??Number.NaN),this.requestUpdate()}}async onRevertMinBoundsToDefault(){(this.minBoundInputElement.value?.status===i.INVALID||this.axisModel.getMinBound()!==this.defaultMinBound)&&(this.axisModel.getMaxBound()<this.defaultMinBound&&await this.axisModel.setMaxBound(Number.NaN),await this.axisModel.setMinBound(Number.NaN),this.requestUpdate())}async enableLogScale(t){let{checked:e}=t.target;await this.axisModel.setLogarithmic(e&&(this.dataMinValue??Number.NaN)>0),this.requestUpdate()}render(){return s`<div><calcite-block .hidden=${this.axisModel.getValueFormat()?.type===l.DateAxisFormat} open .heading=${this.axisTitle}>${this.renderAxis()}</calcite-block></div>`}renderAxis(){let t=null,e={...this.axisModel.getValueFormat()};switch(this.axisModel.getValueFormat()?.type){case l.CategoryAxisFormat:t=s`<arcgis-charts-config-category-format .categoryFormat=${e} @arcgisChartsConfigCategoryFormatChange=${this.onCategoryFormatChange}></arcgis-charts-config-category-format>`;break;case l.NumberAxisFormat:t=s`<div>${this.renderShowLogScale()}${this.renderMinBound()}${this.renderMaxBound()}<arcgis-charts-config-number-format .numberFormat=${{...e.intlOptions}} @arcgisChartsConfigNumberFormatChange=${this.onNumberFormatChange}></arcgis-charts-config-number-format></div>`;break;case l.DateAxisFormat:t=null;break}return t}renderMaxBound(){let t;if(!this.showMaxBoundOption)t=null;else{let e=x(this.axisModel.getMaxBound(),this.initialMaxBound);t=s`<div><calcite-label class=${o(d.label)}>${this._messages.maxBounds}<calcite-input type=number number-button-type=none .min=${this.maxBoundMinLimit??Number.MIN_SAFE_INTEGER} .max=${this.maxBoundMaxLimit??Number.MAX_SAFE_INTEGER} step=any .value=${e} @calciteInputInput=${this.onMaxBoundsChangeDebounced} ${r(this.maxBoundInputElement)}></calcite-input></calcite-label><div class=${o(d.linkContainer)}><calcite-button .disabled=${this.disableMaxBoundResetBtn} @click=${this.onRevertMaxBoundsToDefault} appearance=transparent icon-end=reset>${this._messages.revertToDefault}</calcite-button></div></div>`}return t}renderMinBound(){let t;if(!this.showMinBoundOption)t=null;else{let e=x(this.axisModel.getMinBound(),this.initialMinBound??void 0);t=s`<div><calcite-label class=${o(d.label)}>${this._messages.minBounds}<calcite-input type=number number-button-type=none .min=${this.minBoundMinLimit??Number.MIN_SAFE_INTEGER} .max=${this.minBoundMaxLimit??Number.MAX_SAFE_INTEGER} step=any .value=${e} @calciteInputInput=${this.onMinBoundsChangeDebounced} ${r(this.minBoundInputElement)}></calcite-input></calcite-label><div class=${o(d.linkContainer)}><calcite-button .disabled=${this.disableMinBoundResetBtn} appearance=transparent icon-end=reset @click=${this.onRevertMinBoundsToDefault}>${this._messages.revertToDefault}</calcite-button></div></div>`}return t}renderShowLogScale(){let t;return this.showEnableLogOption&&(t=s`<calcite-label layout=inline-space-between class=${o({[d.label]:!0,[d.mb2]:!0})}>${this._messages.logScale}<div @mouseenter=${this.onShowLogScaleMouseEnter} @mouseleave=${this.onShowLogScaleMouseLeave}><calcite-switch .checked=${this.axisModel.getLogarithmic()&&(this.dataMinValue??Number.NaN)>0} .disabled=${(this.dataMinValue??Number.NaN)<=0} @calciteSwitchChange=${this.enableLogScale} ${r(this.showLogScaleSwitch)}></calcite-switch></div></calcite-label>`),t}};v("arcgis-charts-config-axis",b);return b},a,b)