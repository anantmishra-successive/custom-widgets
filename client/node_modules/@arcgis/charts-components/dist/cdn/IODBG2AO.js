/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
v4.33.19 */
import c from"./3RODMSQG.js";import a from"./PDDPZQ7S.js";import{a as l,b as O,d as I,h as g,k as N,m as S,q as k,r as L,w as v,x as b}from"./IYCX42AE.js";export default $arcgis.t(([{Dc:K,Gb:T,Gc:J,Kb:P,Lb:z,Mb:W,Pa:V,Pb:j,Qb:$,Tb:F,Tc:h,Uc:M,Vb:H,Yb:R,a:E,db:_,ga:G,ha:U,kb:c,m:A,qc:Y,w:s,xb:q,z:B},{a:Q,b:X,g:Z}])=>{var C=(t=>(t.NONE="none",t.ROTATE="rotate",t.STAGGER="stagger",t.WRAP="wrap",t))(C||{});function he(t){let e=s(t);return B(t.axes)||(e.axes=t.axes?.map(i=>{let r=i;return delete r.calculateAutomaticMaximum,delete r.calculateAutomaticMinimum,r.title?.content.font?.style!==void 0&&(r.title.content.font.style=r.title.content.font.style.toLowerCase()),r})),e}function Oe(t){let e=s(t);return B(t.series)||(e.series=t.series.map((i,r)=>{let o=i;i.id===void 0&&(o.id=`Series ${Date.now()}-${r}`);let n=b(t.series,r);return(n===l.BarSeries||n===l.LineSeries||n===l.RadarSeries)&&o.query?.outStatistics?.[0]?.statisticType==="median"&&(o.query.outStatistics[0].statisticType=O.ContinuousPercentile),n===l.BarSeries&&o.multipleBarType!==void 0&&(o.stackedType=o.multipleBarType,delete o.multipleBarType),n===l.PieSeries&&o.sliceGrouping!==void 0&&(o.sliceGrouping.sliceId=G.defaultGroupOfSlicesId,o.sliceGrouping.groupName!==void 0&&(o.sliceGrouping={...o.sliceGrouping,label:o.sliceGrouping.groupName},delete o.sliceGrouping.groupName),o.sliceGrouping.groupSliceSymbol!==void 0&&(o.sliceGrouping={...o.sliceGrouping,fillSymbol:o.sliceGrouping.groupSliceSymbol},delete o.sliceGrouping.groupSliceSymbol)),o})),e}async function ee(t,e){let i=[];return await Promise.all(t.map(async r=>{if(!q(r)){let o=T(r,!1);if(o.fieldToSort!==void 0){let n=await h({queryObject:e,fieldToMatch:o.fieldToSort});n!==void 0&&i.push(o.orderBy===void 0?n:`${n} ${o.orderBy}`)}}})),i}async function Te(t,e){let i={...t},r=e;if(!r){let o=Z(t)?t.iLayer:t.dataSource?.layer;o&&(r=await J(o))}if(r){let o=F(i.series),n=b(i.series),f=i.series&&i.series.length>0&&i.series[0].x.trim()===""||n===l.GaugeSeries&&!R(t)||o===c.PieFromFields||o===c.BarAndLineFromFields||o===c.BoxPlotMonoField||o===c.BoxPlotMonoFieldAndSplitBy||o===c.BoxPlotMultiFields||o===c.BoxPlotMultiFieldsAndSplitBy,m=n===l.ScatterSeries||o===c.BarAndLineNoAggregation||o===c.BarAndLineSplitByNoAggregation||o===c.BoxPlotMonoField||o===c.BoxPlotMonoFieldAndSplitBy||o===c.BoxPlotMonoFieldAndCategory||o===c.BoxPlotMonoFieldAndCategoryAndSplitBy||o===c.PieNoAggregation;if(i.series=await Promise.all(t.series.map(async d=>{let a={...d};if(f||(a.x=await h({queryObject:r,fieldToMatch:d.x})),"y"in a&&m){let u=a.y;if(Array.isArray(u)){let y=await M({fieldsList:u,queryObject:r});y!==void 0&&"y"in a&&(a.y=y)}else"y"in a&&typeof u=="string"&&(a.y=await h({queryObject:r,fieldToMatch:u}))}if(d.query!==void 0){let{where:u,groupByFieldsForStatistics:y,outStatistics:p}=d.query;if(y=await M({fieldsList:y,queryObject:r}),p!==void 0&&(p=await Promise.all(p.map(async x=>{let w={...x};return w.onStatisticField=await h({queryObject:r,fieldToMatch:x.onStatisticField}),w}))),u!==void 0&&o===c.BarAndLineSplitBy){let x=j(d.query?.where),w=$({where:d.query?.where,normalize:!1,escape:!1});u=`${await h({queryObject:r,fieldToMatch:x})}=${w}`}a.query!==void 0&&(u!==void 0&&(a.query.where=u),y!==void 0&&(a.query.groupByFieldsForStatistics=y),p!==void 0&&(a.query.outStatistics=p))}return a})),i.series[0]?.query!==void 0){let d=i.series[0].query,{orderByFields:a}=d;a!==void 0&&a.length>0&&(a=await ee(a,r),a.length>0&&d.orderByFields!==void 0&&(i.series[0].query.orderByFields=a))}if(i.orderOptions?.orderByFields!==void 0){let{orderByFields:d}=i.orderOptions;d!==void 0&&d.length>0&&(d=await ee(d,r),d.length>0&&(i.orderOptions.orderByFields=d))}if(n===l.GaugeSeries&&t.axes?.[0]!==void 0){let{minimumFromField:d,maximumFromField:a}=t.axes[0];if(d!==void 0){let u=typeof d=="string"?d:d.onStatisticField,y=await h({queryObject:r,fieldToMatch:u}),p=d;typeof t.axes[0].minimumFromField=="string"?p=y:typeof d=="object"&&(p={...d,onStatisticField:y}),t.axes[0].minimumFromField=p}if(a!==void 0){let u=typeof a=="string"?a:a.onStatisticField,y=await h({queryObject:r,fieldToMatch:u}),p=a;typeof t.axes[0].maximumFromField=="string"?p=y:typeof a=="object"&&(p={...a,onStatisticField:y}),t.axes[0].maximumFromField=p}}}return i}function Fe(t){let e=s(t);if(!B(t.series)&&b(t.series)===l.BoxPlotSeries){let i=e.series[0];i&&(i.showOutliers!==void 0&&(t.showOutliers===void 0&&(e.showOutliers=i.showOutliers),delete i.showOutliers),i.standardizeValues!==void 0&&(t.standardizeValues===void 0&&(e.standardizeValues=i.standardizeValues),delete i.standardizeValues),i.showMean!==void 0&&(t.showMean===void 0&&(e.showMean=i.showMean),delete i.showMean))}return e}function xe(t){let e={orderType:v.Category,orderBy:g.Ascending},i=t.query?.orderByFields?.[0];if(i!==void 0){let{outStatisticFieldName:r,statisticType:o}=t.query?.outStatistics?.[0]??{},n=T(i);r!==void 0&&n.fieldToSort===r&&o!==void 0&&(o===O.Average||o==="mean"?e.orderType=v.Mean:o===O.ContinuousPercentile&&(e.orderType=v.Median)),e.orderBy=n.orderBy??g.Ascending}return e}function we(t){let e=!1,i=Array.from(new Set(t.series.map(r=>r.type)));return i.length===2&&i.includes(l.BoxPlotSeries)&&i.includes(l.LineSeries)&&(e=t.series.find(r=>r.type===l.LineSeries)?.query?.outStatistics?.[0]!==void 0),e}function Ae(t){let e=s(t);if(!B(e.series)&&b(t.series)===l.BoxPlotSeries){if(e.orderOptions?.data===void 0){let i=xe(t.series[0]);i.orderType!==void 0&&(e.orderOptions??={},e.orderOptions.data={orderType:i.orderType,orderBy:i.orderBy})}if(e.series=t.series.map(i=>{let r=i;return B(r.x?.trim())&&(r.x=U),delete r.query?.orderByFields,r}),we(e)){e.showMean=!0;let i=e.series.find(r=>r.type===l.BoxPlotSeries);e.series.forEach(r=>{r.type===l.LineSeries&&(delete r.query?.groupByFieldsForStatistics,delete r.query?.outStatistics,delete r.query?.orderByFields,i&&(r.y=i.y))})}e.series=t.series.map(i=>{let r=i;return delete r.query?.outStatistics,r})}return e}function ke(t){let e=s(t);return e.legend!==void 0&&!Number.isFinite(e.legend.maxHeight)&&(e.legend.maxHeight=Number.NaN),e}function Le(t){let e=s(t);return"dataSource"in e&&e.dataSource.layer&&(e.iLayer=e.dataSource.layer,delete e.dataSource),e}function qe(t){let e=s(t),i=new Set,r=e.id??"";return i.add(r),e.series.forEach(o=>{let n=o.id;i.has(n)&&(n=`${n}_${Date.now()}`,o.id=n),i.add(n)}),e}function Pe(t){let e=s(t);return e?.orderOptions?.orderByFields!==void 0&&F(t.series)===c.PieFromFields&&(e.orderOptions.orderByFields=t?.orderOptions?.orderByFields?.map(i=>{let r=s(i);return i!==void 0&&i.includes("arcgis_charts_pie_category_from_fields_name")&&(r=i.replace("arcgis_charts_pie_category_from_fields_name",A)),r})),e}function Me(t){let e=s(t);if(!B(t.series)&&e.axes?.[0]!==void 0&&b(t.series)===l.GaugeSeries&&t.axes?.[0]!==void 0){let i=t.axes[0];i.ticks!==void 0&&Object.hasOwn(i.ticks,"spacing")&&delete i.ticks.spacing,e.axes[0]=i}return e}function Ce(t){let e=s(t),{extent:i}=e.series[0]?.query??{};return i!==void 0&&(e.dataFilters={...e.dataFilters,geometry:i},e.series.forEach(r=>{"query"in r&&"extent"in r.query&&delete r.query.extent})),e}function be(t){let e=s(t);return B(t.series)||(Q(t)&&t.rotated===void 0&&(e.rotated=t.series[0].rotated??V()),e.series.forEach(i=>{i.rotated!==void 0&&delete i.rotated})),e}function De(t){let e=s(t),i=t.dataSource;return"dataSource"in e&&!B(i)&&(i.type==="featureLayer"&&e.dataSource!==void 0&&(e.dataSource.type="layer"),"featureLayer"in i&&(e.dataSource.layer=i.featureLayer,delete e.dataSource.featureLayer)),e}function Ee(t){let e=s(t);if("dataSource"in t){let i=t.dataSource;if(i.filter!==void 0&&i.filter.trim()!==""){let r=K([i.filter,e.dataFilters?.where]);e.dataFilters={...e.dataFilters,where:r},delete e.dataSource.filter}}return e}function Ie(t){return t!=="originalValue"}function Se(t){let e;switch(t){case"mean":e=v.Mean;break;case"median":e=v.Median;break;case"category":e=v.Category;break}return e}function Ne(t){let e=s(t);if(!B(t.series)&&b(t.series)===l.PieSeries){let i=e.series[0];if(i){if(i.sortLabelsBy==="originalValue")e.sortLabelsBy=i.sortLabelsBy;else if(i.sortLabelsBy!==void 0&&e.orderOptions?.data===void 0){let r=D(e);r!==void 0&&(e.orderOptions??={},e.orderOptions.data=r)}i.sortLabelsBy&&delete i.sortLabelsBy}}return e}function Ge(t){let e=s(t);return B(t.series)||(X(t)&&t.stackedType===void 0&&(e.stackedType=t.series[0].stackedType??_()),e.series.forEach(i=>{"stackedType"in i&&delete i.stackedType})),e}function Ue(t){let e=s(t),i=t.sortOptions?.sortSeriesBy;return e.orderOptions===void 0&&typeof i=="string"&&(e.orderOptions??={},e.orderOptions.series={orderBy:i==="DESC"?g.Descending:g.Ascending}),e}function Ve(t){let e=s(t);return e.colorMatch===void 0&&e.series[0]?.colorType!==void 0&&(e.colorMatch=e.series[0]?.colorType===I.Match),e.series.forEach(i=>{i.colorType!==void 0&&delete i.colorType}),e}function _e(t){let e=s(t);if(e.sortDataBy!==void 0){if(e.orderOptions?.data===void 0){let i=t.sortDataBy,r=Se(i?.sortType);r!==void 0&&(e.orderOptions??={},e.orderOptions.data={orderType:r,orderBy:i?.sortOrder??g.Ascending})}delete e.sortDataBy}return e}function ze(t){let e=s(t);return e.axes?.forEach(i=>{i!==void 0&&i.scrollbarVisible!==void 0&&i.scrollbar?.visible===void 0&&(i.scrollbar={...i.scrollbar,visible:i.scrollbarVisible},delete i.scrollbarVisible)}),e}function We(t){let e=s(t),i=e.series[0]?.query?.orderByFields;if(i!==void 0&&i.length>0&&e.orderOptions?.orderByFields===void 0){e.orderOptions??={};let r=!0;if(i.length===1){let{fieldToSort:o,orderBy:n}=T(i[0]),f;o===t.series[0].x||o===A?f=v.Category:"y"in t.series[0]&&o===t.series[0].y&&(f=v.YValue),f!==void 0&&(r=!1,e.orderOptions.data===void 0&&(e.orderOptions.data={orderType:f,orderBy:n?.toUpperCase()==="DESC"?g.Descending:g.Ascending}))}r&&(e.orderOptions.orderByFields=i)}return e.series.forEach(r=>{delete r.query?.orderByFields}),e}function D(t){let e,i=t.orderOptions?.orderByFields?.[0];if(t.series?.length>0){let r=b(t.series),o=F(t.series);if(r!==l.PieSeries&&o!==c.BarAndLineFromFields&&(i=i??t.series[0].x),i&&!q(i)){let{fieldToSort:n,orderBy:f}=T(i),m;n===t.series[0].x||n===A?m=v.Category:"y"in t.series[0]&&n===t.series[0].y&&(m=v.YValue),m!==void 0&&(e={orderType:m,orderBy:f?.toUpperCase()==="DESC"?g.Descending:g.Ascending})}}return e}function je(t){let e=s(t),i=t,r=t,o=t,n=t,f=t;if(e){if(e.orderOptions?.series===void 0&&i.sortOptions?.sortSeriesBy!==void 0&&(e.orderOptions??={},e.orderOptions.series={preferLabel:Ie(r.sortLabelsBy??i.sortOptions.sortSeriesBy.sortType),orderBy:i.sortOptions.sortSeriesBy.sortOrder??g.Ascending}),r.sortLabelsBy==="originalValue"||n.orderOptions?.data?.preferDataLabel===!1||f.orderOptions?.data?.preferLabel===!1)e.orderOptions?.data&&delete e.orderOptions.data;else if(e.orderOptions?.data===void 0)if(b(e.series)===l.BoxPlotSeries){if(r.sortLabelsBy||o.sortOptions?.sortDataBy!==void 0){let m=Se(o.sortOptions?.sortDataBy?.sortType);m!==void 0&&(e.orderOptions??={},e.orderOptions.data={orderType:m,orderBy:o.sortOptions?.sortDataBy?.sortOrder??g.Ascending})}}else{let m=D(e);m!==void 0&&(e.orderOptions??={},e.orderOptions.data=m)}"sortLabelsBy"in e&&delete e.sortLabelsBy,"sortOptions"in e&&delete e.sortOptions}return e}function $e(t){let e=s(t);if(e){let i=F(e.series);if((i===c.BarAndLineFromFields||i===c.PieFromFields)&&e.orderOptions?.data===void 0&&e.orderOptions?.orderByFields!==void 0){let r=D(e);r!==void 0&&(e.orderOptions??={},e.orderOptions.data=r,delete e.orderOptions.orderByFields)}}return e}function He(t){let e=s(t);return e.horizontalAxisLabelsBehavior===C.NONE&&(e.horizontalAxisLabelsBehavior=k.Hide),e.verticalAxisLabelsBehavior===C.NONE&&(e.verticalAxisLabelsBehavior=k.Hide),e}function Re(t){let e=s(t),i=e.series[0];if(i&&!i.temporalBinning&&H(e.series[0])&&("timeIntervalSize"in i||"timeIntervalUnits"in i||"timeAggregationType"in i||"trimIncompleteTimeInterval"in i||"nullPolicy"in i)){if(i.temporalBinning={type:N.FixedDateBased},i.timeIntervalSize!==void 0&&(i.temporalBinning.size=i.timeIntervalSize,delete i.timeIntervalSize),i.timeIntervalUnits){let r;switch(i.timeIntervalUnits){case"esriTimeUnitsSeconds":r=S.Second;break;case"esriTimeUnitsMinutes":r=S.Minute;break;case"esriTimeUnitsHours":r=S.Hour;break;case"esriTimeUnitsDays":r=S.Day;break;case"esriTimeUnitsWeeks":r=S.Week;break;case"esriTimeUnitsMonths":r=S.Month;break;case"esriTimeUnitsYears":r=S.Year;break}r!==void 0&&(i.temporalBinning.unit=r),delete i.timeIntervalUnits}i.timeAggregationType&&(i.temporalBinning.timeAggregationType=i.timeAggregationType,delete i.timeAggregationType),i.trimIncompleteTimeInterval!==void 0&&(i.temporalBinning.trimIncompleteTimeInterval=i.trimIncompleteTimeInterval,delete i.trimIncompleteTimeInterval),i.nullPolicy&&(i.temporalBinning.nullPolicy=i.nullPolicy,delete i.nullPolicy)}return e}function Ye(t){let e=s(t);return e.series.forEach(i=>{i.query?.outStatistics?.forEach(r=>{r.statisticType==="percentile_cont"?r.statisticType=O.ContinuousPercentile:r.statisticType==="percentile_disc"&&(r.statisticType=O.DiscretePercentile)})}),e}function Ke(t){let e=s(t);return e.subtitle===void 0&&e.subTitle&&(e.subtitle=e.subTitle),delete e.subTitle,e}async function Je(t,e){let i=s(t);return i=he(i),i=Oe(i),i=await Te(i,e),i=Fe(i),i=Ae(i),i=ke(i),i=qe(i),i}function Qe(t){let e=s(t);return e=Pe(e),e}function te(t){let e=s(t);return e=Me(e),e}function ie(t){let e=s(t);return e=Ce(e),e}function re(t){let e=s(t);return e=be(e),e}function oe(t){let e=s(t);return e=De(e),e}function se(t){let e=s(t);return e=Ee(e),e}function ne(t){let e=s(t);return e=Ne(e),e}function ae(t){let e=s(t);return e=Ue(e),e}function de(t){let e=s(t);return e=Ve(e),e}function le(t){return ze(t)}function ce(t){let e=s(t);return t.series[0]?.type===l.BoxPlotSeries&&(e=_e(e)),e}function ue(t){return Ge(t)}function ye(t){return je(t)}function pe(t){return Le(t)}function fe(t){return $e(t)}function me(t){return He(t)}function ge(t){return Re(t)}function ve(t){return Ye(t)}function Be(t){let e=s(t);return e=be(e),Ke(e)}function Xe(t){let{versionsToConvert:e=[],configToUpdate:i}=t,r=s(i);return e.length>0&&r!==void 0&&(r=We(r),e.includes(P)||e.includes(z)?(r=Qe(r),r=te(r),r=ie(r),r=re(r),r=oe(r),r=se(r),r=ne(r),r=ae(r),r=de(r),r=le(r),r=ce(r),r=ue(r),r=ye(r),r=pe(r),r=fe(r),r=me(r),r=ge(r),r=ve(r),r=Be(r)):e.forEach(o=>{if(r!==void 0)switch(o){case"1.0.1":r=te(r);break;case"3.4.0":r=ie(r);break;case"4.0.0":r=re(r);break;case"4.0.1":r=oe(r);break;case"6.4.0":r=se(r);break;case"7.5.1":r=ne(r);break;case"8.0.0":r=ae(r);break;case"9.2.0":r=de(r);break;case"9.7.0":r=le(r);break;case"10.0.0":r=ce(r);break;case"11.0.0":r=ue(r);break;case"14.0.1":r=ye(r);break;case"16.0.0":r=pe(r);break;case"16.1.0":r=fe(r);break;case"18.1.3":r=me(r);break;case"20.1.0":r=ge(r);break;case"21.0.0":r=ve(r);break;case"23.1.0":r=Be(r);break}}),r.version=E),r}async function ot(t,e){let i=t;if(t){let r=Y(e);i=await Je(t,r);let o=t.version??P,{versionStatus:n,versions:f}=W(o);(n===L.Older||n===L.Unrecognized)&&(i=Xe({versionsToConvert:f,configToUpdate:i}))}return i}return ot},a,c)