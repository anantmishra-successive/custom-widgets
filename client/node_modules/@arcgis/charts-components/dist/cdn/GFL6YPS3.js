/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
v4.33.19 */
import i from"./53DAH35C.js";import h from"./UP2W23ZO.js";import g from"./FAR2K6TZ.js";import e from"./IODBG2AO.js";import d from"./UHUEI4NU.js";import c from"./3RODMSQG.js";import b from"./PDDPZQ7S.js";import{d as f,e as a}from"./TJWJSZZ6.js";import{a as n}from"./IYCX42AE.js";import"./YG7SBKS5.js";export default $arcgis.t(([,,,,,,,{La:m,Na:I,Tb:u,Ua:v,Zc:P,ga:h,h:l,kb:c,ta:p,w:L,wa:g},,{H:U,I:y,J:V},,{a:_,b:T,c:x,d:F,e:N,f:G,g:A,h:k,i:S,j:C},{a:w},{a:M,b:b,c:E,d:B}])=>{var K=i=>i.legend?.displayNumericValue??!1,Q=(i,e)=>{e.series[0]?.type===n.PieSeries&&(e.legend===void 0&&(e.legend=g()),e.legend.displayNumericValue=i)},X=i=>i.legend?.displayPercentage??!1,Y=(i,e)=>{e.series[0]?.type===n.PieSeries&&(e.legend===void 0&&(e.legend=g()),e.legend.displayPercentage=i)},Z=i=>i.legend?.labelMaxWidth??200,$=(i,e)=>{e.series[0]?.type===n.PieSeries&&(e.legend===void 0&&(e.legend=g()),e.legend.labelMaxWidth=i)},d=class extends b{getDisplayNumericValue(){return K(this._config)}setDisplayNumericValue(e){Q(e,this._config),this.emitConfigUpdate("setDisplayNumericValue")}getDisplayPercentage(){return X(this._config)}setDisplayPercentage(e){Y(e,this._config),this.emitConfigUpdate("setDisplayPercentage")}getLabelMaxWidth(){return Z(this._config)}setLabelMaxWidth(e){$(e,this._config),this.emitConfigUpdate("setLabelMaxWidth")}};y(d,[b]);var ee=i=>i.series?.[0]?.innerRadius,ie=(i,e)=>{e.series?.[0]&&(e.series[0].innerRadius=i)},se=i=>i.series?.[0]?.dataLabelsCharacterLimit,te=(i,e)=>{e.series?.[0]&&(e.series[0].dataLabelsCharacterLimit=i)},z=i=>i.series[0]?.startAngle,R=(i,e)=>{e.series?.[0]&&(e.series[0].startAngle=i)},re=i=>i.series?.[0]?.displayCategoryOnTooltip??!0,ae=i=>i.series?.[0]?.displayNumericValueOnTooltip??!0,ne=i=>i.series?.[0]?.displayPercentageOnTooltip??!0,oe=(i,e)=>{e.series[0]&&(e.series[0].displayPercentageOnTooltip=i)},le=i=>i.series?.[0]?.valuePrefix,ge=(i,e)=>{e.series?.[0]&&(e.series[0].valuePrefix=i)},ce=i=>i.series?.[0]?.valueSuffix,fe=(i,e)=>{e.series?.[0]&&(e.series[0].valueSuffix=i)},de=i=>i.series?.[0]?.percentagePrefix,he=(i,e)=>{e.series?.[0]&&(e.series[0].percentagePrefix=i)},pe=i=>i.series?.[0]?.percentageSuffix,me=(i,e)=>{e.series?.[0]&&(e.series[0].percentageSuffix=i)},ue=i=>{let e,s=i.series?.[0];return s?.displayNumericValueOnDataLabel===!0&&s?.displayPercentageOnDataLabel===!0?e=a.Both:s?.displayNumericValueOnDataLabel===!0?e=a.Value:e=a.Percentage,e},ye=(i,e)=>{let s=i===a.Value||i===a.Both,t=i===a.Percentage||i===a.Both;e.series?.[0]&&(e.series[0].displayNumericValueOnDataLabel=s,e.series[0].displayPercentageOnDataLabel=t),e.legend&&(e.legend={...e.legend,displayNumericValue:s,displayPercentage:t})},_e=i=>i.series?.[0]?.alignDataLabels??!1,Se=(i,e)=>{e.series[0]&&(e.series[0].alignDataLabels=i)},Ce=i=>i.series?.[0]?.dataLabelsInside??!1,be=(i,e)=>{e.series[0]&&(e.series[0].dataLabelsInside=i)},Oe=i=>i.series?.[0]?.dataLabelsOffset??10,De=(i,e)=>{e.series[0]&&(e.series[0].dataLabelsOffset=i)},Le=i=>i.series?.[0]?.numericValueFormat?.intlOptions?.minimumFractionDigits,Ie=(i,e)=>{e.series?.[0]&&(e.series[0].numericValueFormat??=p(),e.series[0].numericValueFormat.intlOptions.minimumFractionDigits=i,e.series[0].numericValueFormat.intlOptions.maximumFractionDigits=i,e.series[0].percentValueFormat??=p(),e.series[0].percentValueFormat.intlOptions.minimumFractionDigits=i,e.series[0].percentValueFormat.intlOptions.maximumFractionDigits=i)},ve=i=>i.series?.[0]?.optimizeDataLabelsOverlapping??!1,Pe=(i,e)=>{e.series[0]&&(e.series[0].optimizeDataLabelsOverlapping=i)},Ue=i=>i.series[0]?.ticks?.visible??!1,Ve=(i,e)=>{e.series?.[0]&&(e.series[0].ticks??=m(),e.series[0].ticks.visible=i)},Te=i=>i.series[0]?.ticks?.lineSymbol,xe=(i,e)=>{i&&e.series?.[0]&&(e.series[0].ticks??=m(),e.series[0].ticks.lineSymbol=L(i))},Fe=(i,e)=>e.series?.[0]?.slices?.[i]?.originalLabel,Ne=(i,e)=>e.series?.[0]?.slices?.[i]?.label,Ge=(i,e,s)=>{s.series?.[0]?.slices?.[e]&&(s.series[0].slices[e].label=i)},Ae=(i,e)=>e.series?.[0]?.slices?.[i]?.fillSymbol?.color,ke=(i,e,s)=>{let t=s.series?.[0]?.slices?.[e]?.fillSymbol;t!==void 0?(t.color=i,t.outline!==void 0?t.outline.color=i:t.outline={type:l.SLS,color:i}):s.series?.[0]?.slices?.[e]!==void 0&&(s.series[0].slices[e].fillSymbol={type:l.SFS,color:i,outline:{type:l.SLS,color:i}})},we=i=>i.series?.[0]?.slices?.map(e=>e.sliceId),W=(i,e)=>{e.series?.[0]?.slices?.sort((s,t)=>i.findIndex(r=>s.sliceId===r)-i.findIndex(r=>t.sliceId===r))},Me=i=>i.series?.[0]?.sliceGrouping,j=(i,e)=>{e.series?.[0]&&(e.series[0].sliceGrouping=i)},q=i=>i.series?.[0]?.sliceGrouping?.percentageThreshold,Ee=(i,e)=>{e.series?.[0]?.sliceGrouping!==void 0?e.series[0].sliceGrouping.percentageThreshold=i:e.series[0].sliceGrouping={sliceId:h.defaultGroupOfSlicesId,percentageThreshold:i}},Be=i=>i.series?.[0]?.slices,H=(i,e)=>{e.series?.[0]&&(e.series[0].slices=i)},ze=i=>{H(void 0,i),j({sliceId:h.defaultGroupOfSlicesId,percentageThreshold:q(i)??0},i)},Re=(i,e)=>e.series[0]?.slices?.[i]?.sliceId,We=(i,e)=>e.series[0]?.slices?.findIndex(s=>s.sliceId===i),je=i=>i.series[0]?.slices?.length??0,O=class extends w{constructor(){super(...arguments),this._chartType=n.PieSeries,this._mode=f.Category,this._groupedSliceIds=[]}async setup(e){await this.loadConfigFromLayer(e);let{config:s}=e;if(s!==void 0){let t=u(s.series);this._mode=t!==c.PieFromFields?f.Category:f.Fields}this.resolveSetup()}getCategory(){return _(this._config)}async setCategory(e){(!P(this._config)||e.trim()!=="")&&(await G({newCategory:e,config:this._config,layerInfo:this.layerInfo,mode:this._mode}),this.dispatchEvent(new CustomEvent("arcgisChartsModelDataChange")),this.emitConfigUpdate("setCategory"))}getNumericFields(){return x(this._config)}async setNumericFields(e){typeof e=="string"&&(e=[e]),this.layerInfo===void 0||U(this.layerInfo.layerFieldsInfo,e)?(await k({newNumericFields:e,config:this._config,layerInfo:this.layerInfo,mode:this._mode}),this.dispatchEvent(new CustomEvent("arcgisChartsModelDataChange")),this.emitConfigUpdate("setNumericFields")):console.log("Invalid numericFields")}getAggregationType(){return F(this._config,this._mode)}async setAggregationType(e){await A({newAggregationType:e,config:this._config,layerInfo:this.layerInfo,mode:this._mode}),this.dispatchEvent(new CustomEvent("arcgisChartsModelDataChange")),this.emitConfigUpdate("setAggregationType")}getSortOrder(){return T(this._config,this._mode)}setSortOrder(e,s){N({newSortOrderKind:e,config:this._config,orderByList:s}),this.emitConfigUpdate("setSortOrder")}getOrderByList(){return S(this._config,this._mode)}setOrderByList(e){C({values:e,config:this._config,mode:this._mode}),this.emitConfigUpdate("setOrderByList")}getMode(){return this._mode}setMode(e){this._mode=e,this.emitConfigUpdate("setMode")}async getCustomSortValues(){let e=_(this._config),s=u(this._config.series),t=this.getNumericFields(),r=[];return s===c.PieFromFields?r=t:e.trim()!==""&&s===c.PieFromCategory&&(r=await V({category:e,config:this._config,layerInfo:this.layerInfo})),r}moveCustomSortValuesInOrderByList(e,s){let t=S(this._config,this._mode),[r]=t.splice(e,1);t.splice(s,0,r),C({values:t,config:this._config,mode:this._mode}),this.emitConfigUpdate("moveCustomSortValuesInOrderByList")}getTicksSymbol(){return Te(this._config)}setTicksSymbol(e){xe(e,this._config),this.emitConfigUpdate("setTicksSymbol")}getSlices(){return Be(this._config)}setSlices(e){H(e,this._config),this.emitConfigUpdate("setSlices")}getGroupedSliceIds(){return this._groupedSliceIds}setGroupedSliceIds(e){this._groupedSliceIds=e,this.emitConfigUpdate("setGroupedSliceIds")}getSliceGrouping(){return Me(this._config)}setSliceGrouping(e){j(e,this._config),this.emitConfigUpdate("setSliceGrouping")}getInnerRadiusSize(){return ee(this._config)??0}setInnerRadiusSize(e){ie(e,this._config),this.emitConfigUpdate("setInnerRadiusSize")}getGroupingThreshold(){return q(this._config)??0}setGroupingThreshold(e){Ee(e,this._config),this.emitConfigUpdate("setGroupingThreshold")}getLabelCharacterLimit(){return se(this._config)??null}setLabelCharacterLimit(e){te(e,this._config),this.emitConfigUpdate("setLabelCharacterLimit")}getDecimalPlaces(){return Le(this._config)??1}setDecimalPlaces(e){Ie(e,this._config),this.emitConfigUpdate("setDecimalPlaces")}getDisplayType(){return ue(this._config)}setDisplayType(e){ye(e,this._config),this.emitConfigUpdate("setDisplayType")}async generateDefaultConfig(){let e=await v();return e.series=[await I(this.layerInfo?.objectIdField)],e}getOriginalSliceName(e){return Fe(e,this._config)}getSliceName(e){return Ne(e,this._config)}setSliceName(e,s){Ge(e,s,this._config),this.emitConfigUpdate("setSliceName")}getSliceColor(e){return Ae(e,this._config)}setSliceColor(e,s){ke(e,s,this._config),this.emitConfigUpdate("setSliceColor")}getOrderOfSlices(){return we(this._config)}setOrderOfSlices(e){W(e,this._config),this.emitConfigUpdate("setOrderOfSlices")}moveSeries(e,s){let t=this.getOrderOfSlices();if(t!==void 0){let[r]=t.splice(e,1);t.splice(s,0,r),W(t,this._config),this.emitConfigUpdate("moveSeries")}}getSliceId(e){return Re(e,this._config)}getSliceIndex(e){return We(e,this._config)}getSlicesLength(){return je(this._config)}resetSlices(){ze(this._config),this.emitConfigUpdate("resetSlices")}resetAvailable(){let e=!this.getColorMatch(),s=!1,t=this.getSlices()?.length??0;for(let o=0;o<t;o+=1){let D=this.getOriginalSliceName(o),J=this.getSliceName(o);if(D!==void 0&&D?.toString()!==J?.toString()){s=!0;break}}let r=this.getSliceGrouping();return r?.originalLabel!==void 0&&r?.label!==r.originalLabel&&(s=!0),e||s}getTicksVisibility(){return Ue(this._config)}setTicksVisibility(e){Ve(e,this._config),this.emitConfigUpdate("setTicksVisibility")}getStartAngle(){return z(this._config)}setStartAngle(e){R(e,this._config),this.emitConfigUpdate("setStartAngle")}getEndAngle(){return z(this._config)}setEndAngle(e){R(e,this._config),this.emitConfigUpdate("setEndAngle")}getDisplayCategoryValueOnTooltip(){return re(this._config)}getDisplayNumericValueOnTooltip(){return ae(this._config)}setDisplayCategoryOnTooltip(e){this._config.series[0].displayCategoryOnTooltip=e,this.emitConfigUpdate("setDisplayCategoryValue")}setDisplayNumericValueOnTooltip(e){this._config.series[0].displayNumericValueOnTooltip=e,this.emitConfigUpdate("setDisplayNumericValue")}getDisplayPercentageOnTooltip(){return ne(this._config)}setDisplayPercentageOnTooltip(e){oe(e,this._config),this.emitConfigUpdate("setDisplayPercentage")}getValuePrefix(){return le(this._config)}setValuePrefix(e){ge(e,this._config),this.emitConfigUpdate("setValuePrefix")}getValueSuffix(){return ce(this._config)}setValueSuffix(e){fe(e,this._config),this.emitConfigUpdate("setValueSuffix")}getPercentagePrefix(){return de(this._config)}setPercentagePrefix(e){he(e,this._config),this.emitConfigUpdate("setPercentagePrefix")}getPercentageSuffix(){return pe(this._config)}setPercentageSuffix(e){me(e,this._config),this.emitConfigUpdate("setPercentageSuffix")}getDataLabelsOffset(){return Oe(this._config)}setDataLabelsOffset(e){De(e,this._config),this.emitConfigUpdate("setDataLabelsOffset")}getAlignDataLabels(){return _e(this._config)}setAlignDataLabels(e){Se(e,this._config),this.emitConfigUpdate("setAlignDataLabels")}getDataLabelsInside(){return Ce(this._config)}setDataLabelsInside(e){be(e,this._config),this.emitConfigUpdate("setDataLabelsInside")}getOptimizeDataLabelsOverlapping(){return ve(this._config)}setOptimizeDataLabelsOverlapping(e){Pe(e,this._config),this.emitConfigUpdate("setOptimizeDataLabelsOverlapping")}};y(O,[d,E,M,B]);return O},"geometry/support/jsonUtils","rest/support/AttributeBinsQuery","rest/support/Query","rest/support/StatisticDefinition","time/TimeExtent","core/promiseUtils","request",b,c,d,e,g,h,i)