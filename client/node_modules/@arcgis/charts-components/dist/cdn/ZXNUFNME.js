/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
v4.33.19 */
import{a as O}from"./RTYYUXTS.js";import{a as M}from"./NEMZXIB4.js";import g from"./NCOEWMF7.js";import f from"./5NI5R3AO.js";import{a as b}from"./QDODWAYJ.js";import"./ITSRCSFZ.js";import e from"./PDDPZQ7S.js";import{A as a,B as m,E as L,c as u,d as l,n as d,z as x}from"./MDSKC43G.js";import"./TJWJSZZ6.js";import{g as c}from"./IYCX42AE.js";import"./YG7SBKS5.js";export default $arcgis.t(([,,,,,,,{C:P,kb:p},{o:$,p:I},{a:y,b:g,c:B}])=>{var n={topSection:"top-section",sectionLabel:"section-label",list:"list",infoIcon:"info-icon"},E=u`:host{display:flex;flex-direction:column;width:var(--arcgis-charts-config-calcite-block-default-width);margin:var(--arcgis-charts-config-calcite-block-default-margin)}.top-section{margin-top:var(--arcgis-charts-config-margin-minor)}.section-label{display:flex;margin-bottom:var(--arcgis-charts-config-margin-major);margin-left:var(--arcgis-charts-config-margin-minor);margin-right:var(--arcgis-charts-config-margin-minor);justify-content:space-between;align-items:center;font-weight:var(--calcite-font-weight-medium);font-size:var(--calcite-font-size-0)}.list{margin-left:var(--arcgis-charts-config-margin-minor);margin-right:var(--arcgis-charts-config-margin-minor);margin-bottom:var(--arcgis-charts-config-margin-major)}.info-icon{margin:auto 1rem;pointer-events:auto}`,C=class extends x{constructor(){super(...arguments),this._messages=b(),this.resetSeriesOriginal=()=>{this.configSeriesOpen=!1,this.selectedSeriesIndex=void 0,this.model.resetSeriesStyling(),this.seriesOrderResetCounter+=1},this.onMultipleSeriesSelect=async e=>{if(!this.shouldDisableMeanLinesOption()){let i=e.target,t=i.value??i.parentElement.value??"";await this.model.setShowMeanLines(t===c.MeanLines)}},this.seriesNameChange=e=>{if(e.detail!==null||e.detail!==void 0){let i=e.detail?.name;this.model.setSeriesName(i,this.selectedSeriesIndex??-1)}},this.seriesColorChange=e=>{if(e.detail!==null&&e.detail!==void 0){let{color:i}=e.detail;i!==void 0&&(this.meanLinesBoxColorIsSelected?this.model.setMeanLinesBoxColor(i):(this.model.setColorMatch(!1),this.model.setSeriesColor(i,this.selectedSeriesIndex??-1)))}},this.seriesLineStyleChange=e=>{if(e.detail!==null&&e.detail!==void 0){let{style:i}=e.detail;i!==void 0&&this.model.setSeriesLineStyle(i,this.selectedSeriesIndex??-1)}},this.seriesLineWidthChange=e=>{if(e.detail!==null&&e.detail!==void 0){let{width:i}=e.detail;i!==void 0&&this.model.setSeriesLineWidth(i,this.selectedSeriesIndex??-1)}},this.onCalciteListOrderChange=e=>{let i=this.model.getBoxPlotSeriesIndexWhenMeanLinesShown();if(e.detail!==null&&e.detail!==void 0){let{newIndex:t,oldIndex:s}=e.detail,o=s,r=t;i!==-1&&(o=s>=i?s+1:s,r=t>=i?t+1:t),this.model.moveSeries(o,r),this.seriesOrderResetCounter+=1}},this.seriesPopoverClose=()=>{this.selectedSeriesIndex=void 0,this.meanLinesBoxColorIsSelected=!1,this.configSeriesOpen=!1,this.seriesPopover=g(this.seriesPopover)},this.seriesPopoverChange=e=>{this.arcgisChartsConfigBoxPlotSeriesPopoverChange.emit({open:e,element:this.seriesPopover})},this.openSeriesPopOver=e=>{let i=e.target,t=i.localName==="calcite-list-item"?i:i.parentNode,s=!this.configSeriesOpen,o=this.model.getSeriesIndex(t.value);if(o!==void 0&&o!==-1)this.configSeriesOpen=this.selectedSeriesIndex===o?s:!0,this.configSeriesOpen?this.selectedSeriesIndex=o:this.selectedSeriesIndex=void 0,this.meanLinesBoxColorIsSelected=!1;else if(t.value==="box-plot-color"){let r=!this.meanLinesBoxColorIsSelected;this.configSeriesOpen=r,this.meanLinesBoxColorIsSelected=r,this.selectedSeriesIndex=void 0}},this.createTooltip=(e,i)=>{let t=e.target;this.tooltip=$(t),this.tooltip.innerHTML=i,document.body.appendChild(this.tooltip)},this.destroyTooltip=()=>{I(this.tooltip)},this.onModelConfigChange=()=>{this.requestUpdate()},this.openChange=e=>{this.arcgisChartsConfigPopoverOpenChange.emit(e.detail)},this.meanLinesBoxColorIsSelected=!1,this.seriesOrderResetCounter=0,this.configSeriesOpen=!1,this.activeColorMatch=!1,this.popoverPlacement="leading",this.arcgisChartsConfigBoxPlotSeriesPopoverChange=d(),this.arcgisChartsConfigPopoverOpenChange=d({composed:!0,cancelable:!0,bubbles:!0})}static{this.properties={selectedSeriesIndex:16,meanLinesBoxColorIsSelected:16,seriesOrderResetCounter:16,messageOverrides:0,model:0,configSeriesOpen:5,activeColorMatch:5,popoverPlacement:1}}static{this.styles=E}load(){this.modelChange(this.model),this.onModelConfigChange()}willUpdate(e){e.has("model")&&this.modelChange(this.model,e.get("model")),e.has("selectedSeriesIndex")&&this.selectedSeriesIndexChange(),e.has("meanLinesBoxColorIsSelected")&&this.meanLinesBoxColorIsSelectedChange()}disconnectedCallback(){super.disconnectedCallback(),this.removeSeriesPopover(),this.model.removeEventListener("arcgisChartsModelConfigChange",this.onModelConfigChange)}modelChange(e,i){i?.removeEventListener("arcgisChartsModelConfigChange",this.onModelConfigChange),e.addEventListener("arcgisChartsModelConfigChange",this.onModelConfigChange)}selectedSeriesIndexChange(){this.selectedSeriesIndex!==void 0&&this.configSeriesOpen?(this.setupSeriesPopover(),this.seriesPopover&&(this.seriesPopover.selectedName=this.model.getSeriesName(this.selectedSeriesIndex),this.seriesPopover.selectedColor=this.model.getSeriesColor(this.selectedSeriesIndex),this.seriesPopover.isLineSymbol=this.model.getShowMeanLines()===!0,this.seriesPopover.selectedLineStyle=this.model.getSeriesLineStyle(this.selectedSeriesIndex),this.seriesPopover.selectedLineWidth=this.model.getSeriesLineWidth(this.selectedSeriesIndex),this.seriesPopover.open||(this.seriesPopover.open=!0)),this.addSeriesPopover()):this.removeSeriesPopover()}meanLinesBoxColorIsSelectedChange(){this.meanLinesBoxColorIsSelected&&this.configSeriesOpen?(this.setupSeriesPopover(),this.seriesPopover&&(this.seriesPopover.selectedColor=this.model.getMeanLinesBoxColor(),this.seriesPopover.isLineSymbol=!1,this.seriesPopover.open||(this.seriesPopover.open=!0)),this.addSeriesPopover()):this.removeSeriesPopover()}removeSeriesPopover(){this.seriesPopover!==null&&this.seriesPopover!==void 0&&(this.seriesPopover.open=!1,this.seriesPopover=g(this.seriesPopover)),this.seriesPopoverChange(!1)}buildSeriesListItems(){let e=this.model.getSeriesLength(),i=this.model.getBoxPlotSeriesIndexWhenMeanLinesShown(),t=Array.from({length:e},(s,o)=>o);return O(t,s=>this.model.getSeriesId(s),s=>{let o=this.model.getSeriesId(s),r=this.model.getSeriesColor(s),h=this.model.getSeriesName(s),S=this.model.getChartSubType(),w=S===p.BoxPlotMonoField||S===p.BoxPlotMultiFields?this._messages.series:o,v="#CCCCCC",f="minus-square";if((e>1||!this.activeColorMatch)&&r!==void 0){f=this.model.getShowMeanLines()===!0?"line-solid":"square-f";let[N,T,_,k]=[...r];v=`rgba(${N},${T},${_},${k/255})`}return i!==s?l`<calcite-list-item .label=${h??o??""} .description=${w} .value=${o} .selected=${this.selectedSeriesIndex===s} @click=${this.openSeriesPopOver}><calcite-icon slot=content-end .icon=${f} style=${m({color:v})}></calcite-icon></calcite-list-item>`:null})}buildSeriesList(){return M(this.seriesOrderResetCounter,l`<calcite-list label class=${a(n.list)} drag-enabled selection-mode=single selection-appearance=border @calciteListOrderChange=${this.onCalciteListOrderChange}>${this.buildSeriesListItems()}</calcite-list>`)}setupSeriesPopover(){if(P(this.seriesPopover)&&this.el!==void 0){let e={seriesNameChange:this.seriesNameChange,seriesColorChange:this.seriesColorChange,seriesLineStyleChange:this.seriesLineStyleChange,seriesLineWidthChange:this.seriesLineWidthChange,openChange:this.openChange,hostElement:this.el,placement:this.popoverPlacement,labelCanBeConfigured:!this.meanLinesBoxColorIsSelected,popoverClose:this.seriesPopoverClose};this.seriesPopover=B(y.BoxPlotSeriesPopover,e)}}addSeriesPopover(){this.seriesPopover&&!document.body.contains(this.seriesPopover)&&document.body.appendChild(this.seriesPopover),this.seriesPopoverChange(!0)}shouldDisableMeanLinesOption(){return this.model.getSplitByField()===""||this.model.getSplitByField()===void 0}renderMeanLinesBoxColorItem(){let e="#CCCCCC",i="minus-square",t=this.model.getMeanLinesBoxColor();if(t!==void 0){i="square-f";let[s,o,r,h]=[...t];e=`rgba(${s},${o},${r},${h/255})`}return l`<calcite-list label class=${a(n.list)}><calcite-list-item value=box-plot-color .label=${this._messages.boxPlotColor} .selected=${this.meanLinesBoxColorIsSelected} @click=${this.openSeriesPopOver}><calcite-icon slot=content-end .icon=${i} style=${m({color:e})}></calcite-icon></calcite-list-item></calcite-list>`}renderMultipleSeriesOption(){let e=this.shouldDisableMeanLinesOption();return e?[]:[l`<div class=${`${n.sectionLabel} ${n.topSection}`}>${this._messages.displayMultipleSeries}</div>`,l`<calcite-list label class=${a(n.list)} selection-mode=single-persist selection-appearance=border @click=${this.onMultipleSeriesSelect}><calcite-list-item .label=${this._messages.sideBySide} .value=${c.Side} .selected=${this.model.getShowMeanLines()!==!0}><calcite-icon slot=content-start scale=l icon=graph-box-side-by-side></calcite-icon><calcite-icon class=${a(n.infoIcon)} slot=actions-end icon=information scale=s flip-rtl @mouseover=${i=>this.createTooltip(i,this._messages.sideBySideTooltip??"")} @mouseout=${this.destroyTooltip}></calcite-icon></calcite-list-item><calcite-list-item .label=${this._messages.meanLines} .value=${c.MeanLines} .disabled=${e} .selected=${this.model.getShowMeanLines()===!0}><calcite-icon slot=content-start scale=l icon=graph-box-mean-lines></calcite-icon><calcite-icon class=${a(n.infoIcon)} slot=actions-end icon=information scale=s flip-rtl @mouseover=${i=>this.createTooltip(i,this._messages.meanLinesTooltip??"")} @mouseout=${this.destroyTooltip}></calcite-icon></calcite-list-item></calcite-list>`,this.model.getShowMeanLines()===!0?this.renderMeanLinesBoxColorItem():null]}render(){return l`${this.renderMultipleSeriesOption()}<div class=${a(n.sectionLabel)}>${this._messages.series}<calcite-button @click=${this.resetSeriesOriginal} .disabled=${!this.model.resetAvailable()} appearance=transparent icon-end=reset>${this._messages.reset}</calcite-button></div>${this.buildSeriesList()}`}};L("arcgis-charts-config-box-plot-series",C);return C},"geometry/support/jsonUtils","rest/support/AttributeBinsQuery","rest/support/Query","rest/support/StatisticDefinition","time/TimeExtent","core/promiseUtils","request",e,f,g)