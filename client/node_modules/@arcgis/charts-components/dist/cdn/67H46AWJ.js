/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
v4.33.19 */
import b from"./3RODMSQG.js";import{d as t}from"./ITSRCSFZ.js";import a from"./PDDPZQ7S.js";import{E as m,c as n,d as s,n as h,z as d}from"./MDSKC43G.js";import"./IYCX42AE.js";import"./YG7SBKS5.js";export default $arcgis.t(([,,,,,,,{A:a,Gc:c,Ic:g,Kc:p,Lc:C},{g:f}])=>{var y=n`:host{overflow-y:auto;overflow-x:hidden;margin-bottom:var(--arcgis-charts-intra-section-margin);margin-top:var(--arcgis-charts-intra-section-margin);height:100%}`,l=class extends d{constructor(){super(...arguments),this.popoverElement=null,this.onModelConfigChange=async i=>{let e=i?.detail.config??this.model.getConfig();this.layer===void 0&&await this.updateFetchLayerFieldsInfo(e)},this.activeColorMatch=!1,this.popoverPlacement="leading",this.arcgisChartsConfigNoSeriesUpdate=h()}static{this.properties={layerFieldsInfo:16,activeColorMatch:16,model:0,timeZone:3,popoverPlacement:3,seriesColor:2,calculatedDataMinMaxBounds:0,calculatedMinMaxBounds:2,page:3,layer:0,usePopupTemplateFieldsInfo:5}}static{this.styles=y}async load(){this.layer!==void 0&&await this.layerChange(this.layer,void 0),this.seriesColor!==void 0&&this.seriesColorChange(this.seriesColor),this.usePopupTemplateFieldsInfo!==void 0&&await this.usePopupTemplateFieldsInfoChange(this.usePopupTemplateFieldsInfo,void 0),this.modelChange(this.model),this.onModelConfigChange()}async willUpdate(i){i.has("model")&&this.modelChange(this.model,i.get("model")),i.has("layer")&&await this.layerChange(this.layer,i.get("layer")),i.has("usePopupTemplateFieldsInfo")&&await this.usePopupTemplateFieldsInfoChange(this.usePopupTemplateFieldsInfo,i.get("usePopupTemplateFieldsInfo")),i.has("seriesColor")&&this.seriesColorChange(this.seriesColor),this.layerFieldsInfo===void 0&&await this.updateFetchLayerFieldsInfo()}disconnectedCallback(){super.disconnectedCallback(),this.model.removeEventListener("arcgisChartsModelConfigChange",this.onModelConfigChange)}modelChange(i,e){e?.removeEventListener("arcgisChartsModelConfigChange",this.onModelConfigChange),i?.addEventListener("arcgisChartsModelConfigChange",this.onModelConfigChange)}async layerChange(i,e){i&&!a(e,i)&&await this.updateFetchLayerFieldsInfo()}async usePopupTemplateFieldsInfoChange(i,e){i&&i!==e&&await this.updateFetchLayerFieldsInfo()}seriesColorChange(i){this.activeColorMatch=i?.get(0)?.markerSymbol===void 0,this.model.getColorMatch()&&i?.forEach((e,o)=>{e&&i?.get(0)!==void 0&&("lineSymbol"in e&&(e.lineSymbol?.color!==void 0&&!a(this.model.getSeriesColor(o),e.lineSymbol.color)&&this.model.setSeriesColor(e.lineSymbol.color,o),e.lineSymbol?.style!==void 0&&!a(this.model.getSeriesLineStyle(o),e.lineSymbol.style)&&this.model.setSeriesLineStyle(e.lineSymbol.style,o),e.lineSymbol?.width!==void 0&&!a(this.model.getSeriesLineWidth(o),e.lineSymbol.width)&&this.model.setSeriesLineWidth(e.lineSymbol.width,o)),"markerSymbol"in e&&(e.markerSymbol?.color!==void 0&&!a(this.model.getSeriesMarkerColor(o),e.markerSymbol?.color)&&this.model.setSeriesMarkerColor(e.markerSymbol?.color,o),e.markerSymbol?.style!==void 0&&!a(this.model.getSeriesMarkerStyle(o),e.markerSymbol?.style)&&this.model.setSeriesMarkerStyle(e.markerSymbol?.style,o),e.markerSymbol?.size!==void 0&&this.model.getSeriesMarkerSize(o)!==e.markerSymbol?.size&&this.model.setSeriesMarkerSize(e.markerSymbol?.size,o)))})}async updateFetchLayerFieldsInfo(i){let e=i??this.model.getConfig(),o=this.layer;if(!o){let r=f(e)?e.iLayer:void 0;r&&(o=await c(r))}o&&(this.layerFieldsInfo=await g(o,this.usePopupTemplateFieldsInfo))}popoverOpen(i){let{open:e=!1,element:o=null}={...i.detail};e===!0&&this.popoverElement!==o?(this.popoverElement!==null&&(this.popoverElement.open=!1),this.popoverElement=o):e===!1&&this.popoverElement===o&&(this.popoverElement=null)}render(){let i=this.layerFieldsInfo?.find(r=>r.name===this.model.getXAxisField()),e=i!==void 0&&(p(i)||C(i)),o;switch(this.page){case t.Data:o=s`<arcgis-charts-config-line-chart-data .model=${this.model} .resetTimeInterval=${this.model.resetTimeInterval} .layerFieldsInfo=${this.layerFieldsInfo}></arcgis-charts-config-line-chart-data>`;break;case t.Series:o=s`<arcgis-charts-config-line-chart-series .model=${this.model} .activeColorMatch=${this.activeColorMatch} .popoverPlacement=${this.popoverPlacement} @arcgisChartsConfigLineChartSeriesPopoverChange=${this.popoverOpen}></arcgis-charts-config-line-chart-series>`;break;case t.Axes:o=s`<arcgis-charts-config-axes .model=${this.model} show-min-y-bound-option show-max-y-bound-option show-enable-x-log-option show-enable-y-log-option .calculatedMinMaxBounds=${this.calculatedMinMaxBounds} .calculatedDataMinMaxBounds=${this.calculatedDataMinMaxBounds}></arcgis-charts-config-axes>`;break;case t.Guides:o=s`<arcgis-charts-config-guides .model=${this.model} .timeZone=${this.timeZone} .calculatedMinMaxBounds=${this.calculatedMinMaxBounds} .enableXAxisGuide=${e} enable-y-axis-guide @arcgisChartsConfigGuidePopoverChange=${this.popoverOpen}></arcgis-charts-config-guides>`;break;case t.Format:o=s`<arcgis-charts-config-format .model=${this.model} @arcgisChartsConfigFormatPopoverChange=${this.popoverOpen}></arcgis-charts-config-format>`;break;case t.General:o=s`<arcgis-charts-config-general .model=${this.model}></arcgis-charts-config-general>`;break;default:o="";break}return o}};m("arcgis-charts-config-line-chart",l);return l},"geometry/support/jsonUtils","rest/support/AttributeBinsQuery","rest/support/Query","rest/support/StatisticDefinition","time/TimeExtent","core/promiseUtils","request",a,b)