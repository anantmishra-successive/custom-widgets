/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
v4.33.19 */
import c from"./3RODMSQG.js";import a from"./PDDPZQ7S.js";import{a as S,d as Ke}from"./TJWJSZZ6.js";import{a as A,b,f as fe,h as C,k as P,m as Fe,n as be,o as re,w as I,x as H}from"./IYCX42AE.js";export default $arcgis.t(([,,,,,,,{Dc:ce,Ea:qe,Ga:Le,Ha:Oe,Ja:$e,Jb:Ee,Mc:ye,Nc:Me,Oc:Ue,P:d,Pc:Y,Q:q,Qb:J,Qc:Z,R:Te,Rb:Ve,Tb:W,Vb:v,Y:Ae,b:oe,bb:le,h:we,ha:Ie,kb:V,n:Se,na:ke,o:M,p:he,pa:Ce,pb:De,qc:Q,ra:G,sa:ve,ta:Ne,tb:$,u:ne,v:U,w:xe,xb:je,yc:Pe,z:Be},{i:x,j:B,k:k,l:We,m:_e,o:ze}])=>{async function ge(a){let{queryObject:e,queryConfig:i,category:t,splitByField:s,chartLimits:r,abortKey:l}=a,o=s!==void 0,g=t!==Ie?[t]:[];o&&g.push(s);let c=Q(e),f={...i,groupByFieldsForStatistics:Array.from(new Set(g)),outStatistics:[{statisticType:b.Count,onStatisticField:c.objectIdField,outStatisticFieldName:`${b.Count}_OBJECTID`}],orderByFields:void 0,num:r?.maxBarThreePlusSeriesCountTotal},n=await Pe({queryObject:e,featureCount:1,queryConfig:f,abortKey:l});return Array.from(new Set(n.map(u=>u.attributes[o?s:t]))).sort((u,y)=>typeof u=="string"&&typeof y=="string"?u.localeCompare(y):Number(u)-Number(y))}async function de(a=Te().locale){let e=await import("./ZLVEXEVL.js");switch(a){case d.Arabic:e=await import("./QSK6WA3D.js");break;case d.Bosnian:e=await import("./6F3ESIVY.js");break;case d.Bulgarian:e=await import("./MVZBXIEB.js");break;case d.Catalan:e=await import("./QJXJTVZE.js");break;case d.Czech:e=await import("./HN3UBYQV.js");break;case d.Danish:e=await import("./7UCRFDGM.js");break;case d.German:e=await import("./3MAK4M4T.js");break;case d.Greek:e=await import("./2CSXEBBR.js");break;case d.EnglishUSA:e=await import("./3BPFLPQY.js");break;case d.Spanish:e=await import("./SOFCQCGT.js");break;case d.Estonian:e=await import("./XL22OV2V.js");break;case d.French:e=await import("./LMTVHHU4.js");break;case d.Finnish:e=await import("./QGVOIECF.js");break;case d.Hebrew:e=await import("./JKB5TVAX.js");break;case d.Croatian:e=await import("./IBVO46UV.js");break;case d.Hungarian:e=await import("./ITRLVNO6.js");break;case d.Indonesian:e=await import("./ISU6ALUO.js");break;case d.Italian:e=await import("./YRFVUTQQ.js");break;case d.Japanese:e=await import("./5MB4BROB.js");break;case d.Korean:e=await import("./JVGNAARN.js");break;case d.Lithuanian:e=await import("./WUVTMOKV.js");break;case d.Latvian:e=await import("./UUZ42ET7.js");break;case d.NorwegianBokml:e=await import("./QDLE27PL.js");break;case d.Dutch:e=await import("./YRSCMZDG.js");break;case d.Polish:e=await import("./QXP4RKKS.js");break;case d.PortugueseBrazil:e=await import("./YJRV54UL.js");break;case d.PortuguesePortugal:e=await import("./OUY4IJ6A.js");break;case d.Romanian:e=await import("./DZIQ2IOS.js");break;case d.Russian:e=await import("./TK5AB5J3.js");break;case d.Serbian:e=await import("./3KNNMBR7.js");break;case d.Slovak:e=await import("./76QS2OTL.js");break;case d.Slovenian:e=await import("./F5XTUBXJ.js");break;case d.Swedish:e=await import("./4744PDC5.js");break;case d.Thai:e=await import("./DYCUH27L.js");break;case d.Turkish:e=await import("./5ENNAIAZ.js");break;case d.Ukrainian:e=await import("./3PPM2NJA.js");break;case d.Vietnamese:e=await import("./RY2MNPKM.js");break;case d.ChineseChina:e=await import("./RHP6OAO7.js");break;case d.ChineseHongKong:e=await import("./4CHWNRBH.js");break;case d.ChineseTaiwan:e=await import("./JDXYFXHW.js");break;case d.English:}return e}function R(a,e,i){let t=a?.axes?.[e];t?.title!==void 0?t.title.content.text=i:t!==void 0&&(t.title=Ce({text:i,visible:!0,font:ke(Ae.AxisTitle)}))}async function ee(a){let{config:e,layerInfo:i,numericFields:t,aggregationType:s}=a,r="";if(e){let l=De(e)===fe.Stacked100,o=await de();if(l)r=o.axisLabels.percent;else{let g=await le(s);if(t.length===1){let c=$(i.layerFieldsInfo,t[0]);s===b.NoAggregation?r=c:s===b.Count&&t[0]===i.objectIdField?r=o.axisLabels.count:r=q(o.axisLabels.aggregationOfFieldName,{aggregation:g,fieldName:c})}else t.length>1&&(s===b.NoAggregation?r=o.axisLabels.values:r=q(o.axisLabels.aggregationOfValues,{aggregation:g}))}}return r}var Xe=async(a,e)=>a.axes?.[e]??(await qe(a.type))[e],He=(a,e,i)=>{a.axes!==void 0&&(a.axes[i]=e)},ae=(a,e,i)=>{let t=Number.NaN;return i?t=a.axes?.[e]?.maximum:t=a.axes?.[e]?.minimum,t??Number.NaN},ie=async(a,e,i,t)=>{let s=a?.axes?.[i];t&&s!==void 0?s.maximum=e:!t&&s!==void 0&&(s.minimum=e)},Da=a=>ae(a,1,!0),j=async(a,e)=>{await ie(a,e,1,!0)},ja=a=>ae(a,1,!1),E=async(a,e)=>{await ie(a,e,1,!1)},Ea=a=>ae(a,0,!0),ea=async(a,e)=>{await ie(a,e,0,!0)},Va=a=>ae(a,0,!1),aa=async(a,e)=>{await ie(a,e,0,!1)},ia=a=>a.axes?.[0]?.valueFormat??G(),ta=async(a,e)=>{let i=await Xe(a,0);if(i!==void 0&&e!==void 0){let t={...i,valueFormat:e};He(a,t,0)}},Pa=a=>{let e;return ze(a.axes?.[1]?.valueFormat)&&(e=a.axes?.[1]?.valueFormat),e},Ma=async(a,e)=>{let i=await Xe(a,1);if(i!==void 0&&e!==void 0){let t={...i,valueFormat:e};He(a,t,1)}},Re=(a,e,i)=>{let t=a.axes?.[e];t!==void 0&&(t.integerOnlyValues=i)},sa=a=>{let e=S.xAxisAsc,i=a.orderOptions?.data?.orderType??I.Category,t=a.orderOptions?.data?.orderBy??C.Ascending;return i===I.Category&&Array.isArray(t)?e=S.customSort:i===I.Category?t===C.Ascending?e=S.xAxisAsc:e=S.xAxisDesc:t===C.Ascending?e=S.yAxisAsc:e=S.yAxisDesc,e},ra=a=>{let e=H(a.series),i=!1;return(e===A.BarSeries||e===A.LineSeries)&&(i=sa(a)===S.customSort),i},Ua=a=>{let e=[],i=a.orderOptions?.data?.orderType;return ra(a)&&i===I.Category&&(e=a.orderOptions?.data?.orderBy),e},Wa=(a,e,i)=>{let t=I.Category,s=C.Ascending,r=H(e.series);e.orderOptions??={},a===S.customSort&&i!==void 0?(s=[...i],e.orderOptions.data={orderType:t,orderBy:s}):(r===A.BarSeries||r===A.LineSeries)&&(t=a===S.xAxisAsc||a===S.xAxisDesc?I.Category:I.YValue,s=a===S.xAxisAsc||a===S.yAxisAsc?C.Ascending:C.Descending,e.orderOptions.data={orderType:t,orderBy:s})},_=a=>a?.series?.[0]?.x??"",me=a=>{let{config:e,numericFields:i,aggregationType:t,mode:s,layer:r,numericFieldIndex:l,seriesIndex:o,splitByField:g=""}=a,c=H(e.series),f=W(e.series),n=r?Q(r).objectIdField:"FID",u=_(e),y=i.length===1&&i[0]===n,m="y",p="y";switch(c){case A.PieSeries:{t!==b.NoAggregation?s===Ke.Category?(m=`${t}_${i[0]}_0`.toUpperCase(),p=y?U(b.Count):U(`${t} of ${i[0]}`)):m=Se:m=i[0];break}case A.BarSeries:case A.LineSeries:case A.ComboLineAndBarSeries:case A.RadarSeries:{if(g===""||i.length>1)u===M||u===void 0||u.trim()===""||f===V.BarAndLineFromFields?m=he:(m=`${t}_${i[l??0]}_${l??0}`.toUpperCase(),p=y?U(b.Count):U(`${t} of ${i[l??0]}`));else{let F=i[0];m=`${t}_${F}_${o??0}`.toUpperCase(),p=y?U(b.Count):U(`${t} of ${F}`)}break}}return{name:m,description:p}},oa=a=>{let e,i=a.series[0];return v(i)&&(e=i.temporalBinning?.size),e},na=a=>{let e,i=a.series[0];return v(i)&&(e=i.temporalBinning?.unit),e},la=a=>{let e,i=a.series[0];return v(i)&&(e=i.temporalBinning?.timeAggregationType),e},ca=a=>{let e,i=a.series[0];return v(i)&&(e=i.temporalBinning?.trimIncompleteTimeInterval),e},ya=a=>{let e,i=a.series[0];return v(i)&&(e=i.temporalBinning?.nullPolicy),e},Ge=(a,e)=>{e?.series?.forEach(i=>{v(i)&&(i.temporalBinning??={type:P.FixedDateBased},i.temporalBinning.size=a)}),E(e,null),j(e,null)},ga=(a,e)=>{e?.series?.forEach(i=>{v(i)&&(i.temporalBinning??={type:P.FixedDateBased},i.temporalBinning.nullPolicy=a)}),E(e,null),j(e,null)},_a=(a,e)=>{e.series?.forEach(i=>{v(i)&&(i.temporalBinning??={type:P.FixedDateBased},i.temporalBinning.unit=a)}),E(e,null),j(e,null)},za=(a,e)=>{e.series?.forEach(i=>{v(i)&&(i.temporalBinning??={type:P.FixedDateBased},i.temporalBinning.timeAggregationType=a)}),E(e,null),j(e,null)},Ka=(a,e)=>{e.series?.forEach(i=>{v(i)&&(i.temporalBinning??={type:P.FixedDateBased},i.temporalBinning.trimIncompleteTimeInterval=a)}),E(e,null),j(e,null)},Ra=a=>{Ge(0,a)};async function da(a){let{config:e,layer:i,xAxisField:t,splitByField:s,layerFieldsInfo:r,aggregationFields:l,fetchNullValues:o}=a,g=r.filter(F=>F.name===s)[0]?.type,c=o!==!0?`${s} IS NOT NULL`:"",f=t&&o!==!0?`${t} IS NOT NULL`:"",{where:n}=e?.dataFilters??{},u={where:ce([n,c,f]),orderByFields:je(s)?[]:[`${s} ${C.Ascending}`],geometry:e?.dataFilters?.geometry},y=i,m="";l.length===0?m=y?.objectIdField??"":[m]=l;let p=await ge({queryObject:y,category:e?.series[0].x??"",splitByField:s,queryConfig:u});if(e){let F=e?.series.map(w=>J({where:w.query?.where})?.toString()??"").filter(w=>w!==void 0&&w!=="");p=Ee({arrayA:p,arrayB:F,getKey:w=>w.toString()})}return{categoriesArray:p,splitByFieldType:g,numericalField:m}}function Xa(a,e){let i=e==="";for(let t of a)if(e===t.name){i=!0;break}return i}function Ha(a,e){let i=Ue(a),t=e.length===0,s=0;for(let r of e){for(let l of i)if(r===l&&(s+=1),s===e.length){t=!0;break}if(t)break}return t}function Ga(a,e){e.forEach(i=>{Object.getOwnPropertyNames(i.prototype).forEach(t=>{Object.defineProperty(a.prototype,t,Object.getOwnPropertyDescriptor(i.prototype,t)||Object.create(null))})})}async function ma(a){let{layerInfo:e,config:i,category:t}=a,{layer:s}=e,{where:r}=i?.dataFilters??{},{fetchNullValues:l}=i?.series?.[0]?.query??{},o=l!==!0?`${t} IS NOT NULL`:"",g={where:ce([r,o]),orderByFields:[],geometry:i?.dataFilters?.geometry},c=Y(s);return(await ge({queryObject:s,category:t,queryConfig:g})).map(f=>{let n=String(f);return Z({fieldName:t,fieldValueToMatch:n,subtypeInfo:c,fieldList:e.layerFieldsInfo})??n})}async function X(a){let{seriesIndex:e,config:i,layerInfo:t}=a,{objectIdField:s}=t??{},r,l=i.series[e??0],o=!1,g=!1;if(l===void 0){let y=i.series;o=y.slice(0,e).every(m=>x(m)),g=y.slice(0,e).every(m=>B(m))}else o=x(l),g=B(l);o?r=await Le({seriesIndex:e,objectIDField:s}):g?r=await Oe({seriesIndex:e,objectIDField:s}):r=await $e({seriesIndex:e,objectIDField:s});let c=_(i),f=i.series[0]?.dataLabels?.visible??!1,n={...r,x:c,y:"",dataLabels:{...r.dataLabels,type:r.dataLabels?.type??A.Text,content:r.dataLabels?.content??{type:we.TS},visible:f}},u=D(i);if(n.query={groupByFieldsForStatistics:[c]},u!==b.NoAggregation&&s!==void 0){let y=`${u}_${s}_0`.toUpperCase();n.y=y,n.query.outStatistics=[{statisticType:u,onStatisticField:s,outStatisticFieldName:y}]}if(x(n)||B(n)){let y;if(i?.series?.[0]!==void 0&&(y=W(i.series)),y!==V.BarAndLineNoAggregation&&y!==V.BarAndLineSplitByNoAggregation){let m=na(i);m===be.Quarter&&(m=Fe.Month),n.temporalBinning={type:P.FixedDateBased,size:oa(i),unit:m,timeAggregationType:la(i),trimIncompleteTimeInterval:ca(i),nullPolicy:ya(i)}}}return xe(n)}async function te(a,e){let{layerFieldsInfo:i,objectIdField:t}=e,s=_(a),r=W(a.series),l=L(a),o=D(a),g=z(a),c=l.length===0||l.includes(t),f=await le(o),n=c?"":l.map(h=>$(i??[],h)).join(", "),u=$(i??[],s),y=$(i??[],g),m=a.series.some(h=>k(h)),p=m?"category":"xAxisField",F=u,w="",N=await de();if(r===V.BarAndLineFromFields)w=q(N.titleLabels.aggrTypeOfAggrFields,{aggregationType:f,aggregationFields:n});else if(o===b.NoAggregation){let h=c?t:n;if(g===""){let K=m?"aggrTypeCategory":"aggrTypeXAxisField";w=q(N.titleLabels[K],{aggregationType:h,[p]:F})}else{let K=m?"aggrTypeCategoryBySplitBy":"aggrTypeXAxisFieldBySplitBy";w=q(N.titleLabels[K],{aggregationType:h,[p]:F,splitByField:y})}}else if(o===b.Count)if(g===""){let h=m?"aggrTypeCategory":"aggrTypeXAxisField";w=q(N.titleLabels[h],{aggregationType:f,[p]:F})}else{let h=m?"aggrTypeCategoryBySplitBy":"aggrTypeXAxisFieldBySplitBy";w=q(N.titleLabels[h],{aggregationType:f,[p]:F,splitByField:y})}else if(g!==""){let h=m?"aggrTypeOfAggrFieldByCategoryBySplitByField":"aggrTypeOfAggrFieldByXAxisFieldBySplitByField";w=q(N.titleLabels[h],{aggregationType:f,aggregationField:n,[p]:F,splitByField:y})}else if(l.length>0){let h=m?"aggrTypeOfAggrFieldsByCategory":"aggrTypeOfAggrFieldsByXAxisField";w=q(N.titleLabels[h],{aggregationType:f,aggregationFields:n,[p]:F})}return w}var Je=a=>J({where:a.query?.where,normalize:!1,escape:!1})??"",D=a=>a?.series?.[0]?.query?.outStatistics?.[0]?.statisticType??b.NoAggregation,Ja=async(a,e,i)=>{let t=L(e),s=z(e);await pe({splitByField:s,numericFields:t,aggregationType:a,config:e,layerInfo:i});let r=await ee({config:e,layerInfo:i,numericFields:L(e),aggregationType:D(e)});R(e,1,r),e.title&&(e.title.content.text=await te(e,i)),await E(e,null),await j(e,null),ue(e,i)},z=ne(a=>{let e=a?.series?.[0]?.query?.where?.split("=")[0].trim()??"";return Ve(a?.series?.[0]?.query?.where)?"":e},a=>a?.series?.[0]?.query?.where),Qa=async(a,e,i)=>{let t=L(e),s=D(e);await pe({splitByField:a,numericFields:t,aggregationType:s,config:e,layerInfo:i});let r=await ee({config:e,layerInfo:i,numericFields:L(e),aggregationType:D(e)});R(e,1,r),e.title&&(e.title.content.text=await te(e,i)),await E(e,null),await j(e,null)},L=ne(a=>{let e=[];if(z(a)==="")e=a?.series.map(i=>{let t=i.query?.outStatistics?.map(s=>s.onStatisticField)??[];return t?.length>0?t:i.y}).flat()??[];else{let i=a?.series?.[0],t=i?.query?.outStatistics?.[0]?.onStatisticField??[i?.y].flat()[0];e=t!==void 0?[t]:[]}return[...new Set(e.filter(i=>i!==""))]},a=>a?.series),ua=async(a,e,i)=>{let{objectIdField:t}=i,s=D(e);a.length===0?(a.push(t),s=b.Count):s===b.Count&&a.length>=1&&!a.includes(t)&&(s=b.Sum);let r=z(e);await pe({splitByField:r,numericFields:a,aggregationType:s,config:e,layerInfo:i});let l=await ee({config:e,layerInfo:i,numericFields:L(e),aggregationType:D(e)});R(e,1,l),e.title&&(e.title.content.text=await te(e,i)),await E(e,null),await j(e,null),ue(e,i)},Ya=async(a,e,i)=>{let{layerFieldsInfo:t}=i??{},s=e?.series?.length??0,r=_(e),l,o=e.series.some(n=>k(n)),g=We(e.series),c=_e(e.series);if(t!==void 0){let n=Me(t);!n.includes(r)&&n.includes(a)?l=ve():n.includes(r)&&!n.includes(a)&&(o?l=G():l=Ne()),t.find(u=>u.name===a)?.type===oe.String&&(l=G()),l!==void 0&&await ta(e,l)}s===0&&(e.series=[await X({config:e,layerInfo:i})]),e.series.forEach(n=>{n.x=a,n.query!==void 0&&(n.query.groupByFieldsForStatistics=[a])});let f=$(t,a);if(R(e,0,f),i!==void 0){let n=await ee({config:e,layerInfo:i,numericFields:L(e),aggregationType:D(e)});R(e,1,n),e.title&&(e.title.content.text=await te(e,i)),ue(e,i);let u=L(e);await ua(u,e,i)}if(await E(e,null),await j(e,null),g||c){await aa(e,null),await ea(e,null),Ge(0,e);let n=l?.type===A.DateAxisFormat?re.Null:re.Interpolate;ga(n,e)}};function ue(a,e){let i=!1,t=D(a),s=L(a);t===b.Count?i=!0:t===b.NoAggregation&&(i=s.every(o=>{let g=e.layerFieldsInfo.find(c=>c.name===o);return g!==void 0?ye(g):!1})),Re(a,1,i);let r=a.series.some(o=>x(o)),l=a.series.some(o=>B(o));if(r||l){let o=_(a),g=e.layerFieldsInfo.find(f=>f.name===o),c=g!==void 0&&ye(g);Re(a,0,c)}}var pa=a=>{let e=S.xAxisAsc,i=a.orderOptions?.data?.orderType??I.Category,t=a.orderOptions?.data?.orderBy??C.Ascending;return i===I.Category&&Array.isArray(t)?e=S.customSort:i===I.Category?t===C.Ascending?e=S.xAxisAsc:e=S.xAxisDesc:t===C.Ascending?e=S.yAxisAsc:e=S.yAxisDesc,e};async function fa(a){let{numericFields:e,aggregationType:i,config:t,layerInfo:s}=a,r=!1,l=await X({config:t,layerInfo:s,seriesIndex:0}),o=await de(),g=me({config:t,numericFields:e,aggregationType:i,layer:s.layer}).name,c={...l,id:`series_${Date.now()}`,name:o.axisLabels.values,x:M,y:g},f=[];for(let u of e)f.push({onStatisticField:u,outStatisticFieldName:`${u}_0`.toUpperCase(),statisticType:i});c.query={outStatistics:f};let n=t.series[0];return n!==void 0&&(c.id=n.id,t.colorMatch||(k(n)&&k(c)?c.fillSymbol=n.fillSymbol:(x(c)&&x(n)||B(c)&&B(n))&&(c.lineSymbol=n.lineSymbol,c.markerSymbol=n.markerSymbol),r=!0),c.id=n.id,n.name!==l.name&&(c.name=n.name)),t.series.length===1&&!t.colorMatch&&(k(c)?c.fillSymbol=t.series[0].fillSymbol:(x(c)||B(c))&&(c.lineSymbol=t.series[0].lineSymbol,c.markerSymbol=t.series[0].markerSymbol),r=!0),t.colorMatch=!r,[c]}async function Qe(a){let{numericFields:e,aggregationType:i,config:t,layerInfo:s}=a,{layerFieldsInfo:r,objectIdField:l}=s,o=[],g=!1;for(let c=0;c<e.length;c+=1){let f=await X({config:t,layerInfo:s,seriesIndex:c}),n=me({config:t,numericFields:e,aggregationType:i,layer:s.layer,numericFieldIndex:c}).name,u=e[c],y={...f,query:{...f.query}};u!==l&&(y={...y,id:u,name:$(r,u)});let m=u;y.query!==void 0&&(i!==b.NoAggregation?(m=n,y.query.outStatistics=[{...f.query?.outStatistics?.[0]??{},onStatisticField:u,outStatisticFieldName:n,statisticType:i}]):delete y.query.outStatistics),y.y=m;let p=t.series.find(F=>F.query?.outStatistics?.[0]?.onStatisticField===u&&F.query.where===void 0);if(p!==void 0&&typeof p.y=="string"&&p.y.trim()!==""){t.colorMatch||(k(y)&&k(p)?y.fillSymbol=p.fillSymbol:(x(y)&&x(p)||B(y)&&B(p))&&(y.lineSymbol=p.lineSymbol,y.markerSymbol=p.markerSymbol),g=!0);let F=await X({config:t,layerInfo:s,seriesIndex:c});y.id=p.id,p.id!==F.id&&p.name!==F.name&&(y.id=p.id,y.name=p.name)}o.push(y)}return t.series.length===1&&o.length===1&&!t.colorMatch&&(k(t.series[0])&&k(o[0])?o[0].fillSymbol=t.series[0].fillSymbol:(x(t.series[0])&&x(o[0])||B(t.series[0])&&B(o[0]))&&(o[0].lineSymbol=t.series[0].lineSymbol,o[0].markerSymbol=t.series[0].markerSymbol),g=!0),t.colorMatch=!g,o}async function Fa(a){let{splitByField:e,numericFields:i,aggregationType:t,config:s,layerInfo:r}=a,{layer:l,layerFieldsInfo:o}=r,{fetchNullValues:g}=s?.series?.[0]?.query??{},c=_(s),f=c!==M?c:void 0,{categoriesArray:n,splitByFieldType:u,numericalField:y}=await da({config:s,layer:l,layerFieldsInfo:o,xAxisField:f,aggregationFields:i,splitByField:e,fetchNullValues:g}),m=[],p=!1;if(n.length===0){m=await Qe({numericFields:i,aggregationType:t,config:s,layerInfo:r});for(let F of m)F.query&&(F.query.where=`${e}=''`)}else for(let F=0;F<n.length;F+=1){let w=n[F],N=me({config:s,numericFields:i,aggregationType:t,layer:r.layer,seriesIndex:F,splitByField:e}).name,h=await X({config:s,layerInfo:r,seriesIndex:F}),K={fieldName:e,fieldValueToMatch:w??"",subtypeInfo:Y(r.layer),fieldList:r.layerFieldsInfo},Ye=Z(K),se=`${w}`,T={...h,id:se,name:Ye??se,y:N,query:{...h.query,where:`${e}=${u===oe.String&&w!==null?`'${w}'`:w}`,outStatistics:t!==b.NoAggregation?[{...h.query?.outStatistics?.[0]??{},onStatisticField:y,outStatisticFieldName:N,statisticType:t}]:void 0}};t===b.NoAggregation&&(T.query!==void 0&&(delete T.query.outStatistics,delete T.query.groupByFieldsForStatistics),T.y=y);let O=s.series.find(Ze=>String(Je(Ze)).trim().replace(/'/gu,"")===se);O!==void 0&&(s.colorMatch||(k(T)&&k(O)?T.fillSymbol=O.fillSymbol:(x(T)&&x(O)||B(T)&&B(O))&&(T.lineSymbol=O.lineSymbol,T.markerSymbol=O.markerSymbol),p=!0),T.id=O.id,T.name=O.name),m.push(T)}return s.colorMatch=!p,m}var pe=async a=>{let{splitByField:e,numericFields:i,aggregationType:t,config:s,layerInfo:r}=a,{x:l}=s.series[0],o=W(s.series);e===""||i.length>1?l===M||l===void 0||l.trim()===""||o===V.BarAndLineFromFields?s.series=await fa({config:s,layerInfo:r,numericFields:i,aggregationType:t}):s.series=await Qe({config:s,layerInfo:r,numericFields:i,aggregationType:t}):s.series=await Fa({config:s,layerInfo:r,splitByField:e,numericFields:i,aggregationType:t})},Za=a=>{let{config:e,seriesIndex:i,layerInfo:t,commonStrings:s}=a,r=e.series?.[i],l=z(e),o;if(W(e.series)===V.BarAndLineFromFields)o=s.axisLabels.values;else if(Be(l)){let g=r.query?.outStatistics?.[0]?.onStatisticField;g!==void 0&&g!==t.objectIdField&&(o=$(t.layerFieldsInfo,g))}else{let g=String(Je(r)).trim().replace(/'/gu,""),c={fieldName:z(e),fieldValueToMatch:g??"",subtypeInfo:Y(t.layer),fieldList:t.layerFieldsInfo};o=Z(c)??g}return o??r.id},ei=(a,e)=>{e.orderOptions??={};let i=e.orderOptions?.data?.orderType;pa(e)===S.customSort&&i===I.Category&&(e.orderOptions.data={orderType:I.Category,orderBy:[...a]})},ai=a=>a.dataFilters,ii=(a,e)=>{a!==void 0?e.dataFilters=a:delete e.dataFilters},ti=async(a,e)=>{let i=_(a),t=ia(a)?.type,s=L(a),r=W(a.series),l=[];return t===A.CategoryAxisFormat&&(r===V.BarAndLineFromFields||i===M?l=s.map(o=>$(e?.layerFieldsInfo,o)):i.trim()!==""&&i!==M&&e!==void 0&&(l=await ma({layerInfo:e,config:a,category:i}))),l},si=(a,e)=>{e.series.forEach(i=>{i.query&&(i.query.fetchNullValues=a)})},ri=a=>a.series.some(e=>e.query?.fetchNullValues),oi=a=>a.series.map(e=>String(J({where:e.query?.where}))).filter(e=>e!==void 0&&e.trim()!=="");return{a:de,b:R,c:ee,d:Da,e:j,f:ja,g:E,h:Ea,i:ea,j:Va,k:aa,l:ia,m:ta,n:Pa,o:Ma,p:Re,q:Ua,r:Wa,s:_,t:me,u:oa,v:na,w:la,x:ca,y:ya,z:Ge,A:ga,B:_a,C:za,D:Ka,E:Ra,F:da,G:Xa,H:Ha,I:Ga,J:ma,K:D,L:Ja,M:z,N:Qa,O:L,P:ua,Q:Ya,R:pa,S:pe,T:Za,U:ei,V:ai,W:ii,X:ti,Y:si,Z:ri,_:oi}},"geometry/support/jsonUtils","rest/support/AttributeBinsQuery","rest/support/Query","rest/support/StatisticDefinition","time/TimeExtent","core/promiseUtils","request",a,c)