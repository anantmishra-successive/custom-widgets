/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
v4.33.19 */
import{a as c,b as p}from"./EHA2DPVG.js";import{a as g}from"./NEMZXIB4.js";import e from"./NCOEWMF7.js";import d from"./5NI5R3AO.js";import{a as $}from"./QDODWAYJ.js";import{j as h}from"./ITSRCSFZ.js";import b from"./PDDPZQ7S.js";import{A as a,E as y,c as f,d as s,n as o,z as v}from"./MDSKC43G.js";import"./TJWJSZZ6.js";import"./IYCX42AE.js";import"./YG7SBKS5.js";export default $arcgis.t(([,,,,,,,{Kc:b,h:n,tb:u},{a:d,k:m,l:S},{d:P}])=>{var r={jsAppFlyout:"js-app-flyout",scatterplotPopover:"scatter-plot-popover",fillColor:"fill-color",header:"header",pickListItemLabel:"pick-list-item-label",pickListPanel:"pick-list-panel"},x=f`.hide{display:none}.am5-modal{width:100%;height:100%;position:absolute;z-index:100000;top:0;left:0}.am5-modal-curtain{top:0;left:0;width:100%;height:100%;position:absolute;background:#fff!important;z-index:100}.am5-modal-wrapper{top:0;left:0;width:100%;height:100%;position:absolute;display:flex;align-items:center;justify-content:center;white-space:nowrap;background:#ffffff80;z-index:101}.am5-modal-content{display:inline-block;padding:1.2em;vertical-align:middle;text-align:start;white-space:normal;background:#fff;border-radius:4px;box-shadow:#00000073 0 0 36px;color:#000}.am5-layer-1000{z-index:1000!important}.arcgis-charts-modal{box-shadow:none!important}.arcgis-charts-modal-header{background-color:#0000000d;font-weight:700;padding:4px;align-content:center}.show{display:block}.notifyPanel{flex:0 1 auto}.disable-interactions{pointer-events:none}.dim-text{color:var(--arcgis-charts-dim-text)}:host{width:100%}.pick-list-panel{max-height:60vh}`,C=class extends v{constructor(){super(...arguments),this.picklist=c(),this._messages=$(),this.popoverElement=c(),this.layerFieldsInfo=[],this.arcgisChartsConfigPopoverClose=o(),this.arcgisChartsConfigPopoverOpenChange=o(),this.arcgisChartsConfigScatterplotFillColorChange=o(),this.arcgisChartsConfigScatterplotLineStyleChange=o(),this.arcgisChartsConfigScatterplotSizeVariableFieldChange=o(),this.arcgisChartsConfigScatterplotXYFieldChange=o()}static{this.properties={messageOverrides:0,headingTitle:3,contentKind:3,selectedContent:3,referenceElement:2,placement:3,open:7,layerFieldsInfo:0}}static{this.styles=x}async reposition(){await this.popoverElement.value?.reposition()}willUpdate(e){e.has("open")&&this.openChange()}async updated(){setTimeout(async()=>{await this.picklist.value?.setFocus()},d.PopoverTimer),P(this.popoverElement.value,this.open),this.hasUpdated||setTimeout(()=>{this.popoverElement.value?.reposition()},d.PopoverTimer)}loaded(){this.openChange()}openChange(){this.arcgisChartsConfigPopoverOpenChange.emit({open:this.open})}seriesPopoverClose(){this.open=!1,this.arcgisChartsConfigPopoverClose.emit()}closePopover(){this.open=!1,this.arcgisChartsConfigPopoverClose.emit()}updateSymbolProperties(e){this.selectedContent=e.target.lineStyle,this.arcgisChartsConfigScatterplotLineStyleChange.emit(e.detail)}updateColorProperties(e){this.selectedContent=e.detail,this.arcgisChartsConfigScatterplotFillColorChange.emit(e.detail)}onFieldSelectionChange(e){let t=e.target.selectedItems;this.contentKind===h.sizeVariable?this.arcgisChartsConfigScatterplotSizeVariableFieldChange.emit(t.map(i=>i.value)[0]):this.arcgisChartsConfigScatterplotXYFieldChange.emit(t.map(i=>i.value)[0]),this.open=!1}render(){let e=this.selectedContent,t=this.selectedContent;return s`<div class=${a({[r.jsAppFlyout]:!0})}><calcite-popover class=${a(r.scatterplotPopover)} .referenceElement=${this.referenceElement??document.body} .placement=${this.placement} .offsetDistance=${S(this.placement)} @calcitePopoverClose=${this.closePopover} .open=${this.open} label ${p(this.popoverElement)}>${Array.isArray(e)?s`<arcgis-charts-config-color-style .header=${this._messages.fillColor} class=${a(r.fillColor)} enable-close .open=${this.open} .selectedColor=${e} @arcgisChartsConfigColorStyleClose=${this.seriesPopoverClose} @arcgisChartsConfigColorStyleChange=${this.updateColorProperties}></arcgis-charts-config-color-style>`:null}${t?.type===n.SLS?s`<arcgis-charts-config-line-style .header=${this._messages.lineStyle} .open=${this.open} enable-close .lineStyle=${t} @arcgisChartsConfigLineStyleClose=${this.seriesPopoverClose} @arcgisChartsConfigLineStyleChange=${this.updateSymbolProperties}></arcgis-charts-config-line-style>`:null}${!Array.isArray(e)&&t?.type!==n.SLS?this.renderVariablePickList():null}</calcite-popover></div>`}renderVariablePickList(){let e=this.layerFieldsInfo?.length??0,t=[];this.contentKind===h.sizeVariable&&t.push(g(" ",s`<calcite-list-item label=" " value=" " .selected=${m("",this.selectedContent)}></calcite-list-item>`));for(let i=0;i<e;i+=1){let l=this.layerFieldsInfo?.[i]??void 0;if(l!==void 0&&b(l)){let k=u(this.layerFieldsInfo,l.name);t.push(g(l.name,s`<calcite-list-item .label=${k} .value=${l.name} .selected=${m(l.name,this.selectedContent)}></calcite-list-item>`))}}return s`<calcite-panel class=${a(r.pickListPanel)} closable .closed=${!this.open} @calcitePanelClose=${this.closePopover}><div slot=header-content class=${a(r.header)}>${this.headingTitle??""}</div><calcite-list label class=${a(r.pickListItemLabel)} selection-mode=single selection-appearance=border filter-enabled @calciteListChange=${this.onFieldSelectionChange} ${p(this.picklist)}>${t}</calcite-list></calcite-panel>`}};y("arcgis-charts-config-scatter-plot-popover",C);return C},"geometry/support/jsonUtils","rest/support/AttributeBinsQuery","rest/support/Query","rest/support/StatisticDefinition","time/TimeExtent","core/promiseUtils","request",b,d,e)