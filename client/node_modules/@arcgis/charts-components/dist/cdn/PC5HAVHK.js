/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
v4.33.19 */
import b from"./2VN3NTIZ.js";import{a as v,d as e,e as t,f as o}from"./QLPSSNQI.js";import{a as d,b as g}from"./EHA2DPVG.js";import{a as A}from"./QDODWAYJ.js";import{a as m}from"./ITSRCSFZ.js";import a from"./PDDPZQ7S.js";import{A as M,C as s,E as O,c as I,d as c,n as r,z as w}from"./MDSKC43G.js";import{a as h}from"./IYCX42AE.js";import"./YG7SBKS5.js";export default $arcgis.t(([,,,,,,,,{a:_,b:u,c:n}])=>{function V(T){return T?.tagName.toLowerCase()==="arcgis-chart"}var F={actionBar:"action-bar"},L=I`.action-bar{display:flex;flex-direction:column;height:100%;border-right:1px solid var(--calcite-color-border-2);overflow-x:hidden}:host{z-index:1001}`,p=class extends w{constructor(){super(...arguments),this.calciteActionBar=d(),this.exportCalciteActionBar=d(),this.expandAction=null,this._messages=A(),this.commonStrings=A({name:"common",blocking:!0}),this.handleMouseOver=a=>{if(this.calciteActionBar.value&&!this.calciteActionBar.value?.expanded){let l=a.target;this.actionTooltip!==void 0&&(this.actionTooltip=n(this.actionTooltip));let i;l?.tagName==="CALCITE-ACTION"?i=l:(l?.tagName==="CALCITE-ACTION-MENU"||l?.tagName==="DIV")&&(i=l.firstChild),i!==void 0&&(this.actionTooltip=u(i.text,i),this.actionTooltip.open=!0)}else this.actionTooltip=n(this.actionTooltip)},this.actionTooltip=null,this.forceDisableActions=!1,this.editChartToggle=t.Inactive,this.editChartState=o.Disabled,this.legendToggle=t.Inactive,this.legendState=o.Enabled,this.rotateChartToggle=t.Inactive,this.rotateChartState=o.Enabled,this.filterBySelectionToggle=t.Inactive,this.filterBySelectionState=o.Enabled,this.filterByExtentToggle=t.Inactive,this.filterByExtentState=o.Enabled,this.actionBarSelectionMode=v.MultiSelectionWithCtrlKey,this.selectionToggle=t.Inactive,this.selectionState=o.Enabled,this.zoomToggle=t.Inactive,this.zoomState=o.Enabled,this.fullExtentToggle=t.Inactive,this.fullExtentState=o.Enabled,this.clearSelectionToggle=t.Inactive,this.clearSelectionState=o.Enabled,this.switchSelectionToggle=t.Inactive,this.switchSelectionState=o.Enabled,this.exportAsImageState=o.Enabled,this.exportAsCSVState=o.Enabled,this.disableCSVExportForChartTypes=[h.ScatterSeries,h.BoxPlotSeries],this.disabledExportAction=!1,this.expanded=!1,this.hiddenActions=[e.EditChart],this.arcgisActionBarToggle=r(),this.arcgisDefaultActionSelect=r()}static{this.properties={actionTooltip:16,messageOverrides:0,chartType:3,chartElement:0,forceDisableActions:7,editChartToggle:3,editChartState:3,editChartTitle:3,legendToggle:3,legendState:3,legendTitle:3,rotateChartToggle:3,rotateChartState:3,rotateChartTitle:3,filterBySelectionToggle:3,filterBySelectionState:3,filterBySelectionTitle:3,filterByExtentToggle:3,filterByExtentState:3,filterByExtentTitle:3,actionBarSelectionMode:3,selectionToggle:3,selectionState:3,selectionTitle:3,zoomToggle:3,zoomState:3,zoomTitle:3,fullExtentToggle:3,fullExtentState:3,fullExtentTitle:3,clearSelectionToggle:3,clearSelectionState:3,clearSelectionTitle:3,switchSelectionToggle:3,switchSelectionState:3,switchSelectionTitle:3,exportAsImageState:3,exportAsImageTitle:3,exportAsCSVState:3,exportAsCSVTitle:3,disableCSVExportForChartTypes:2,disabledExportAction:7,expanded:7,hiddenActions:0}}static{this.styles=L}async load(){this.chartElement=V(this.el.parentElement)?this.el.parentElement:void 0}updated(){this.handleExpandTooltip()}disconnectedCallback(){super.disconnectedCallback(),this.actionTooltip?.remove()}async onDefaultActionClick(a){let l=a.currentTarget,i={actionId:l.id,actionActive:!1};switch(l.id){case e.EditChart:this.editChartToggle=this.editChartToggle===t.Active?t.Inactive:t.Active,i.actionActive=this.editChartToggle===t.Active;break;case e.Legend:this.legendToggle=this.legendToggle===t.Active?t.Inactive:t.Active,i.actionActive=this.legendToggle===t.Active,this.chartElement!==void 0&&(this.chartElement.legendVisibility=i.actionActive);break;case e.RotateChart:this.rotateChartToggle=this.rotateChartToggle===t.Active?t.Inactive:t.Active,i.actionActive=this.rotateChartToggle===t.Active,this.chartElement!==void 0&&(this.chartElement.rotation=i.actionActive);break;case e.FilterBySelection:this.filterBySelectionToggle=this.filterBySelectionToggle===t.Active?t.Inactive:t.Active,i.actionActive=this.filterBySelectionToggle===t.Active,this.chartElement!==void 0&&(this.chartElement.filterBySelection=i.actionActive);break;case e.FilterByExtent:this.filterByExtentToggle=this.filterByExtentToggle===t.Active?t.Inactive:t.Active,i.actionActive=this.filterByExtentToggle===t.Active,this.chartElement!==void 0&&(this.chartElement.filterByExtent=i.actionActive);break;case e.Selection:this.selectionToggle=t.Active,this.zoomToggle=t.Inactive,i.actionActive=this.selectionToggle===t.Active,this.chartElement!==void 0&&(this.chartElement.actionMode=this.actionBarSelectionMode);break;case e.Zoom:this.zoomToggle=t.Active,this.selectionToggle=t.Inactive,i.actionActive=this.zoomToggle===t.Active,this.chartElement!==void 0&&(this.chartElement.actionMode=v.Zoom);break;case e.ClearSelection:i.actionActive=this.clearSelectionToggle===t.Active,this.chartElement?.clearSelection();break;case e.FullExtent:i.actionActive=this.fullExtentToggle===t.Active,this.chartElement?.resetZoom();break;case e.SwitchSelection:i.actionActive=this.switchSelectionToggle===t.Active,this.chartElement?.switchSelection();break;case e.ExportAsImage:i.actionActive=!0,await this.chartElement?.exportAsImage();break;case e.ExportAsCSV:i.actionActive=!0,await this.chartElement?.exportAsCSV();break}this.arcgisDefaultActionSelect.emit(i)}handleCalciteActionBarToggle(){this.expanded=this.calciteActionBar.value?.expanded??!1,this.setCustomActionsExpanded(),this.arcgisActionBarToggle.emit(this.expanded)}handleMouseOut(){this.actionTooltip!==null&&(this.actionTooltip=n(this.actionTooltip))}handleSlotChange(a){let l=a.currentTarget.assignedElements();for(let i of l)i.onmouseover=this.handleMouseOver}setCustomActionsExpanded(){this.el.querySelectorAll("calcite-action").forEach(a=>{let l=a;l.textEnabled=this.expanded})}handleExpandTooltip(){this.expandAction===null&&(this.expandAction=this.calciteActionBar.value?.shadowRoot?.querySelector("calcite-action")??null,this.expandAction!==null&&(this.expandAction.addEventListener("mouseenter",()=>{!this.calciteActionBar.value?.expanded&&this.expandAction!==null&&!document.body.contains(this.actionTooltip)&&(this.actionTooltip=u(this._messages.expand??"",this.expandAction),this.actionTooltip.open=!0)}),this.expandAction.addEventListener("mouseleave",()=>{!this.calciteActionBar.value?.expanded&&this.actionTooltip!==null&&(this.actionTooltip=n(this.actionTooltip))}),this.expandAction.addEventListener("click",()=>{this.calciteActionBar.value?.expanded&&this.actionTooltip!==null&&(this.actionTooltip=n(this.actionTooltip))})))}renderDefaultActions(){let a=_(this.chartType).filter(z=>!this.hiddenActions?.includes(z)),l=this.chartElement?.layer&&"isTable"in this.chartElement.layer?this.chartElement.layer.isTable:!1,i=a.includes(e.EditChart),x=a.includes(e.Legend),S=a.includes(e.RotateChart),f=a.includes(e.FilterBySelection),$=a.includes(e.FilterByExtent)&&!l,E=a.includes(e.Zoom),b=a.includes(e.Selection),C=a.includes(e.ClearSelection),B=a.includes(e.FullExtent),y=a.includes(e.SwitchSelection),D=a.includes(e.ExportAsImage),k=a.includes(e.ExportAsCSV);return[x||S?c`<calcite-action-group>${i?c`<div @mouseover=${this.handleMouseOver}><calcite-action id=${e.EditChart??s} icon=gear .text=${this.commonStrings?.actions?.editChart??""} .active=${this.editChartToggle===t.Active} .disabled=${this.editChartState===o.Disabled||this.forceDisableActions} @click=${this.onDefaultActionClick}></calcite-action></div>`:null}${x?c`<div @mouseover=${this.handleMouseOver}><calcite-action id=${e.Legend??s} .text=${this.legendTitle??this._messages?.legend??""} .active=${this.legendToggle===t.Active} .disabled=${this.legendState===o.Disabled||this.forceDisableActions} @click=${this.onDefaultActionClick}><calcite-icon icon=legend scale=s flip-rtl></calcite-icon></calcite-action></div>`:null}${S?c`<div @mouseover=${this.handleMouseOver}><calcite-action id=${e.RotateChart??s} icon=rotate .text=${this.rotateChartTitle??this._messages?.rotateChart??""} .active=${this.rotateChartToggle===t.Active} .disabled=${this.rotateChartState===o.Disabled||this.forceDisableActions} @click=${this.onDefaultActionClick}></calcite-action></div>`:null}</calcite-action-group>`:null,f||$?c`<calcite-action-group>${f?c`<div @mouseover=${this.handleMouseOver}><calcite-action id=${e.FilterBySelection??s} icon=selection-filter .text=${this.filterBySelectionTitle??this._messages?.filterBySelection??""} .active=${this.filterBySelectionToggle===t.Active} .disabled=${this.filterBySelectionState===o.Disabled||this.forceDisableActions} @click=${this.onDefaultActionClick}></calcite-action></div>`:null}${$?c`<div @mouseover=${this.handleMouseOver}><calcite-action id=${e.FilterByExtent??s} icon=extent-filter .text=${this.filterByExtentTitle??this._messages?.filterByExtent??""} .active=${this.filterByExtentToggle===t.Active} .disabled=${this.filterByExtentState===o.Disabled||this.forceDisableActions} @click=${this.onDefaultActionClick}></calcite-action></div>`:null}</calcite-action-group>`:null,b||E||B||C||y?c`<calcite-action-group>${E?c`<div @mouseover=${this.handleMouseOver}><calcite-action id=${e.Zoom??s} icon=magnifying-glass .text=${this.zoomTitle??this._messages?.zoom??""} .active=${this.zoomToggle===t.Active} .disabled=${this.zoomState===o.Disabled||this.forceDisableActions} @click=${this.onDefaultActionClick}></calcite-action></div>`:null}${b?c`<div @mouseover=${this.handleMouseOver}><calcite-action id=${e.Selection??s} icon=cursor-selection .text=${this.selectionTitle??this._messages?.selection??""} .active=${this.selectionToggle===t.Active} .disabled=${this.selectionState===o.Disabled||this.forceDisableActions} @click=${this.onDefaultActionClick}></calcite-action></div>`:null}${C?c`<div @mouseover=${this.handleMouseOver}><calcite-action id=${e.ClearSelection??s} icon=erase .text=${this.clearSelectionTitle??this._messages?.clearSelection??""} .active=${this.clearSelectionToggle===t.Active} .disabled=${this.clearSelectionState===o.Disabled||this.forceDisableActions} @click=${this.onDefaultActionClick}></calcite-action></div>`:null}${B?c`<div @mouseover=${this.handleMouseOver}><calcite-action id=${e.FullExtent??s} icon=zoom-out-fixed .text=${this.fullExtentTitle??this._messages?.fullExtent??""} .active=${this.fullExtentToggle===t.Active} .disabled=${this.fullExtentState===o.Disabled||this.forceDisableActions} @click=${this.onDefaultActionClick}></calcite-action></div>`:null}${y?c`<div @mouseover=${this.handleMouseOver}><calcite-action id=${e.SwitchSelection??s} icon=arrow-right-left .text=${this.switchSelectionTitle??this._messages?.switchSelection??""} .active=${this.switchSelectionToggle===t.Active} .disabled=${this.switchSelectionState===o.Disabled||this.forceDisableActions} @click=${this.onDefaultActionClick}></calcite-action></div>`:null}</calcite-action-group>`:null,D||k?c`<calcite-action-menu .label=${this._messages?.export??""} ${g(this.exportCalciteActionBar)}><calcite-action id=export icon=export .text=${this._messages?.export??""} .disabled=${this.disabledExportAction} @mouseover=${this.handleMouseOver} slot=trigger></calcite-action>${D?c`<div><calcite-action id=${e.ExportAsImage??s} icon=graph-bar .text=${this.exportAsImageTitle??this._messages?.exportAsImage??""} .disabled=${this.exportAsImageState===o.Disabled||this.forceDisableActions} @click=${this.onDefaultActionClick} text-enabled></calcite-action></div>`:null}${k?c`<div><calcite-action id=${e.ExportAsCSV??s} icon=table .text=${this.exportAsCSVTitle??this._messages?.exportAsTable??""} .disabled=${this.exportAsCSVState===o.Disabled||this.forceDisableActions||this.chartType&&this.disableCSVExportForChartTypes.includes(this.chartType)} @click=${this.onDefaultActionClick} text-enabled></calcite-action></div>`:null}</calcite-action-menu>`:null]}render(){return c`<calcite-action-bar class=${M(F.actionBar)} @calciteActionBarToggle=${this.handleCalciteActionBarToggle} @mouseout=${this.handleMouseOut} .expanded=${this.expanded} .messageOverrides=${{expand:this._messages.expand,collapse:this._messages.collapse}} overflow-actions-disabled ${g(this.calciteActionBar)}><slot name=${m.customActionTop} @slotchange=${this.handleSlotChange}></slot>${this.renderDefaultActions()}<slot name=${m.customActionBelow} @slotchange=${this.handleSlotChange}></slot></calcite-action-bar>`}};O("arcgis-charts-action-bar",p);return p},"geometry/support/jsonUtils","rest/support/AttributeBinsQuery","rest/support/Query","rest/support/StatisticDefinition","time/TimeExtent","core/promiseUtils","request",a,b)