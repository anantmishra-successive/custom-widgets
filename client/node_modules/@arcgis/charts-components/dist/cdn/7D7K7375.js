/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
v4.33.19 */
import{a as m,b as h}from"./EHA2DPVG.js";import{a as p}from"./NEMZXIB4.js";import d from"./NCOEWMF7.js";import b from"./5NI5R3AO.js";import{a as P}from"./QDODWAYJ.js";import{i as s}from"./ITSRCSFZ.js";import a from"./PDDPZQ7S.js";import{A as t,E as v,c as f,d as i,n as c,z as y}from"./MDSKC43G.js";import"./TJWJSZZ6.js";import{c as o}from"./IYCX42AE.js";import"./YG7SBKS5.js";export default $arcgis.t(([,,,,,,,{Kc:$,ca:b,h:C,tb:u},{a:d,l:S},{d:w}])=>{var l={symbolPropertyPopover:"symbol-property-popover",colorPicker:"color-picker",jsAppFlyout:"js-app-flyout",header:"header",pickListItemLabel:"pick-list-item-label",fieldSelectPanel:"field-select-panel",transformationPanel:"transformation-panel"},T=f`.hide{display:none}.am5-modal{width:100%;height:100%;position:absolute;z-index:100000;top:0;left:0}.am5-modal-curtain{top:0;left:0;width:100%;height:100%;position:absolute;background:#fff!important;z-index:100}.am5-modal-wrapper{top:0;left:0;width:100%;height:100%;position:absolute;display:flex;align-items:center;justify-content:center;white-space:nowrap;background:#ffffff80;z-index:101}.am5-modal-content{display:inline-block;padding:1.2em;vertical-align:middle;text-align:start;white-space:normal;background:#fff;border-radius:4px;box-shadow:#00000073 0 0 36px;color:#000}.am5-layer-1000{z-index:1000!important}.arcgis-charts-modal{box-shadow:none!important}.arcgis-charts-modal-header{background-color:#0000000d;font-weight:700;padding:4px;align-content:center}.show{display:block}.notifyPanel{flex:0 1 auto}.disable-interactions{pointer-events:none}.dim-text{color:var(--arcgis-charts-dim-text)}.right{display:block;text-align:right}.inline{display:inline-flex;flex-wrap:wrap}.symbol-property-popover{min-width:300px}.symbol-property-popover .inline{align-items:center;margin-bottom:1rem;padding:0 1rem}.symbol-property-popover .inline calcite-action{margin-left:.2rem}.symbol-property-popover .inline input,.symbol-property-popover .inline select{width:4rem;margin-left:.5rem;height:24px}.symbol-property-popover .inline select{width:6rem}.symbol-property-popover .color calcite-icon{margin-left:.5rem}.symbol-property-popover .color .color-picker{padding:1rem}.header{margin:0;font-weight:bolder}.pick-list-item-label{font-size:small}.field-select-panel{max-height:60vh}.transformation-panel{width:calc(var(--calcite-panel-width-multiplier) * 12vw);max-width:calc(var(--calcite-panel-width-multiplier) * 300px);min-width:calc(var(--calcite-panel-width-multiplier) * 150px);min-width:calc(var(--calcite-panel-width-multiplier) * 170px)}`,g=class extends y{constructor(){super(...arguments),this._messages=P(),this.picklist=m(),this.popoverElement=m(),this.layerFieldsInfo=[],this.arcgisChartsConfigHistogramPopoverChange=c(),this.arcgisChartsConfigHistogramPopoverSymbolChange=c(),this.arcgisChartsConfigPopoverClose=c(),this.arcgisChartsConfigPopoverOpenChange=c()}static{this.properties={messageOverrides:0,layerFieldsInfo:0,headingTitle:3,selectedNumericField:3,selectedTransformationType:3,selectedOverlaySymbol:2,selectedBinColor:2,referenceElement:2,contentKind:3,placement:1,open:7}}static{this.styles=T}async reposition(){await this.popoverElement.value?.reposition()}willUpdate(e){e.has("open")&&this.openChange()}async updated(){setTimeout(async()=>{await this.picklist.value?.setFocus()},d.PopoverTimer),w(this.popoverElement.value,this.open),this.hasUpdated||setTimeout(()=>{this.popoverElement.value?.reposition()},d.PopoverTimer)}loaded(){this.openChange()}openChange(){this.arcgisChartsConfigPopoverOpenChange.emit({open:this.open})}buildPickListItems(e){let n=[];if(e===s.numericFields)for(let r=0;r<this.layerFieldsInfo?.length;r+=1){let a=this.layerFieldsInfo[r];$(a)&&n.push(p(a.name,i`<calcite-list-item .label=${u(this.layerFieldsInfo,a.name)} .value=${a.name} .selected=${this.selectedNumericField===a.name}></calcite-list-item>`))}else{let r=[p(o.None,i`<calcite-list-item .label=${this._messages.none} .value=${o.None} .selected=${this.selectedTransformationType===o.None}></calcite-list-item>`),p(o.Log,i`<calcite-list-item .label=${this._messages.log} .value=${o.Log} .selected=${this.selectedTransformationType===o.Log}></calcite-list-item>`),p(o.Sqrt,i`<calcite-list-item .label=${this._messages.sqRt} .value=${o.Sqrt} .selected=${this.selectedTransformationType===o.Sqrt}></calcite-list-item>`)];n.push(...r)}return n}getPopoverClass(){return this.contentKind===s.fillSymbol||this.contentKind===s.lineSymbol?l.symbolPropertyPopover:""}closePopover(){(this.open||this.popoverElement.value?.open===!1)&&(this.open=!1,this.arcgisChartsConfigPopoverClose.emit())}overlaySymbolChange(e){this.arcgisChartsConfigHistogramPopoverSymbolChange.emit(e.detail)}fillColorChange(e){let n=e.detail,[r,a,k]=n,x=b*255;this.arcgisChartsConfigHistogramPopoverSymbolChange.emit({type:C.SFS,color:[r,a,k,x]})}onPickListChange(e){e.target!==null&&(this.arcgisChartsConfigHistogramPopoverChange.emit({contentKind:this.contentKind,value:e.target.selectedItems[0].value}),this.open=!1)}renderFillColor(){return i`<arcgis-charts-config-color-style class=${t(l.colorPicker)} .header=${this.headingTitle??this._messages.fillColor} enable-close .open=${this.open} .selectedColor=${this.selectedBinColor?.color} @arcgisChartsConfigColorStyleChange=${this.fillColorChange} @arcgisChartsConfigColorStyleClose=${this.closePopover}></arcgis-charts-config-color-style>`}renderOverlayStyle(){return i`<arcgis-charts-config-line-style class=${t(l.colorPicker)} .open=${this.open} enable-close .header=${this.headingTitle??this._messages.lineStyle} .lineStyle=${this.selectedOverlaySymbol} @arcgisChartsConfigLineStyleClose=${this.closePopover} @arcgisChartsConfigLineStyleChange=${this.overlaySymbolChange}></arcgis-charts-config-line-style>`}renderFieldSelect(){let e=this.buildPickListItems(s.numericFields);return i`<calcite-panel class=${t(l.fieldSelectPanel)} closable .closed=${!this.open} @calcitePanelClose=${this.closePopover}><div slot=header-content class=${t(l.header)}>${this._messages.numericalFieldHeader}</div><calcite-list label selection-mode=single selection-appearance=border class=${t(l.pickListItemLabel)} filter-enabled @calciteListChange=${this.onPickListChange} ${h(this.picklist)}>${e}</calcite-list></calcite-panel>`}renderTransformationSelect(){let e=this.buildPickListItems(s.transformation);return i`<calcite-panel class=${t(l.transformationPanel)} closable .closed=${!this.open} @calcitePanelClose=${this.closePopover}><div slot=header-content class=${t(l.header)}>${this._messages.transformationHeader}</div><calcite-list label selection-mode=single selection-appearance=border class=${t(l.pickListItemLabel)} @calciteListChange=${this.onPickListChange}>${e}</calcite-list></calcite-panel>`}render(){return i`<div class=${t({[l.jsAppFlyout]:!0})}><calcite-popover class=${t(this.getPopoverClass())} .referenceElement=${this.referenceElement??document.body} .placement=${this.placement} @calcitePopoverClose=${this.closePopover} .open=${this.open} .offsetDistance=${S(this.placement)} label ${h(this.popoverElement)}>${this.renderContentType()}</calcite-popover></div>`}renderContentType(){switch(this.contentKind){case s.fillSymbol:return this.renderFillColor();case s.lineSymbol:return this.renderOverlayStyle();case s.numericFields:return this.renderFieldSelect();case s.transformation:return this.renderTransformationSelect();default:return}}};v("arcgis-charts-config-histogram-popover",g);return g},"geometry/support/jsonUtils","rest/support/AttributeBinsQuery","rest/support/Query","rest/support/StatisticDefinition","time/TimeExtent","core/promiseUtils","request",a,b,d)