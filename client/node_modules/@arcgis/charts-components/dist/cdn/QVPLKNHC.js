/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
v4.33.19 */
import{a as p,b as r}from"./ZCZXUNWE.js";import f from"./3PFOQ4XP.js";import{a as c,b as m}from"./EHA2DPVG.js";import e from"./NCOEWMF7.js";import{a as C}from"./QDODWAYJ.js";import a from"./PDDPZQ7S.js";import{A as u,E as $,c as x,d as n,n as A,z as b}from"./MDSKC43G.js";import{q as l,r as h}from"./P76SCC25.js";import{j as d}from"./TJWJSZZ6.js";import"./IYCX42AE.js";import"./YG7SBKS5.js";export default $arcgis.t(([,,,,,,,{w:g},{d:v},{b:G}])=>{var X=x`:host{display:flex;flex-direction:column;width:var(--arcgis-charts-config-calcite-block-default-width);margin:var(--arcgis-charts-config-calcite-block-default-margin)}.add-guide{display:flex;justify-content:center;padding:.5rem}.add-guide-btn{width:100%}.no-guides{border-radius:2rem}.no-messages{text-align:center}.guide-icon{padding-left:.5rem;padding-top:.5rem;width:1.5rem;height:1.5rem}`,f=class extends b{constructor(){super(...arguments),this._messages=C(),this.addGuideButton=c(),this.popoverElement=c(),this.addXGuide=()=>{if(l(this.model)){let e=this.getUniqueName(this._messages.xAxisGuide??""),t=this.model.getXGuidesLength()??0;this.model.addXAxisGuide(e,t),this.model.setGuideStyle(g(G.style),t,d.X),this.latestGuidePosition=r(t,d.X,this.model),this.togglePopOver(),(this.el.shadowRoot?.querySelectorAll("calcite-block")??[]).forEach((i,s)=>{s!==this.latestGuidePosition&&(i.open=!1)})}},this.addYGuide=()=>{if(h(this.model)){let e=this.getUniqueName(this._messages.yAxisGuide??""),t=this.model.getYGuidesLength()??0;this.model.addYAxisGuide(e,t),this.model.setGuideStyle(g(G.style),t,d.Y),this.latestGuidePosition=r(t,d.Y,this.model),this.togglePopOver();for(let i of this.el.shadowRoot?.querySelectorAll("calcite-block")??[])i.open=!1}},this.togglePopOver=()=>{this.enableXAxisGuide&&this.enableYAxisGuide&&(this.showAddButton=!this.showAddButton)},this.onModelConfigChange=()=>{this.requestUpdate()},this.showAddButton=!0,this.latestGuidePosition=0,this.open=!1,this.arcgisChartsConfigGuidePopoverChange=A()}static{this.properties={showAddButton:16,latestGuidePosition:16,messageOverrides:0,model:0,timeZone:3,calculatedMinMaxBounds:2,enableXAxisGuide:5,enableYAxisGuide:5,open:7}}static{this.styles=X}load(){this.modelChange(this.model)}willUpdate(e){e.has("model")&&this.modelChange(this.model,e.get("model"))}updated(){v(this.popoverElement.value,!this.showAddButton)}disconnectedCallback(){super.disconnectedCallback(),this.model.removeEventListener("arcgisChartsModelConfigChange",this.onModelConfigChange)}modelChange(e,t){t?.removeEventListener("arcgisChartsModelConfigChange",this.onModelConfigChange),e?.addEventListener("arcgisChartsModelConfigChange",this.onModelConfigChange)}getAllGuidesLength(){let e=l(this.model)?this.model.getXGuidesLength()??0:0,t=h(this.model)?this.model.getYGuidesLength()??0:0;return e+t}getUniqueName(e,t=1){let i=`${e} ${t}`,s=!1;if(l(this.model)){let o=this.model.getXGuidesLength()??0;for(let a=0;a<o&&!s;a+=1)this.model.getGuideName(a,d.X)===i&&(s=!0)}if(h(this.model)){let o=this.model.getYGuidesLength()??0;for(let a=0;a<o&&!s;a+=1)this.model.getGuideName(a,d.Y)===i&&(s=!0)}return s?this.getUniqueName(e,t+1):i}closeAddPopOver(){this.showAddButton=!0}setChangedGuide(e){let{index:t,orientation:i,isDelete:s}=e.detail,o=r(t,i,this.model);s&&o!==void 0&&o<=this.latestGuidePosition&&this.latestGuidePosition>0&&(this.latestGuidePosition-=1)}renderGuide(e,t){let i;return(this.enableXAxisGuide&&t===d.X||this.enableYAxisGuide&&t===d.Y)&&(i=n`<arcgis-charts-config-guide .model=${this.model} .timeZone=${this.timeZone} .calculatedMinMaxBounds=${this.calculatedMinMaxBounds} .index=${e} .orientation=${t} .latestGuidePosition=${this.latestGuidePosition} @arcgisChartsConfigGuideChange=${this.setChangedGuide}></arcgis-charts-config-guide>`),i}renderGuides(){let e=[];if(l(this.model)){let t=this.model.getXGuidesLength()??0;for(let i=0;i<t;i+=1)e.push(this.renderGuide(i,d.X))}if(h(this.model)){let t=this.model.getYGuidesLength()??0;for(let i=0;i<t;i+=1)e.push(this.renderGuide(i,d.Y))}return e}renderAddGuideButton(e){return n`<calcite-fab slot=fab appearance=outline-fill kind=neutral text-enabled .text=${this._messages.addGuide} .label=${this._messages.addGuide} @click=${e} scale=s></calcite-fab>`}render(){let e=this.getAllGuidesLength(),t=e>0,i=this.showAddButton&&this.enableXAxisGuide&&this.enableYAxisGuide,s=this.enableXAxisGuide&&!this.enableYAxisGuide,o=!this.enableXAxisGuide&&this.enableYAxisGuide;return n`<calcite-popover .open=${!this.showAddButton} .referenceElement=${this.addGuideButton.value??document.body} flip-disabled pointer-disabled offset-distance=-18 @calcitePopoverClose=${this.closeAddPopOver} .placement=${e===0?"bottom":"top"} label ${m(this.popoverElement)}><calcite-panel .heading=${this._messages.guideType}><calcite-action text slot=header-actions-end icon=x @click=${this.closeAddPopOver}></calcite-action>${this.enableXAxisGuide?n`<calcite-action .label=${this._messages.addXAxisGuide} .text=${this._messages.addXAxisGuide??""} @click=${this.addXGuide} icon=x-axis-guide text-enabled></calcite-action>`:null}${this.enableYAxisGuide?n`<calcite-action .label=${this._messages.addYAxisGuide} .text=${this._messages.addYAxisGuide??""} @click=${this.addYGuide} icon=y-axis-guide text-enabled></calcite-action>`:null}</calcite-panel></calcite-popover>${t?this.renderGuides():n`<div class=${u(p.noMessages)}>${this._messages.noGuidesMsg}</div>`}<div class=${u(p.addGuide)} ${m(this.addGuideButton)}>${i&&this.renderAddGuideButton(this.togglePopOver)||""}${s&&this.renderAddGuideButton(this.addXGuide)||""}${o&&this.renderAddGuideButton(this.addYGuide)||""}</div>`}};$("arcgis-charts-config-guides",f);return f},"geometry/support/jsonUtils","rest/support/AttributeBinsQuery","rest/support/Query","rest/support/StatisticDefinition","time/TimeExtent","core/promiseUtils","request",a,e,f)